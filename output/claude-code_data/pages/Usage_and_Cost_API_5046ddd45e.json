{
  "title": "Usage and Cost API",
  "content": "Programmatically access your organization's API usage and cost data with the Usage & Cost Admin API.\n\n<Tip>\n**The Admin API is unavailable for individual accounts.** To collaborate with teammates and add members, set up your organization in **Console → Settings → Organization**.\n</Tip>\n\nThe Usage & Cost Admin API provides programmatic and granular access to historical API usage and cost data for your organization. This data is similar to the information available in the [Usage](/usage) and [Cost](/cost) pages of the Claude Console.\n\nThis API enables you to better monitor, analyze, and optimize your Claude implementations:\n\n* **Accurate Usage Tracking:** Get precise token counts and usage patterns instead of relying solely on response token counting\n* **Cost Reconciliation:** Match internal records with Anthropic billing for finance and accounting teams\n* **Product performance and improvement:** Monitor product performance while measuring if changes to the system have improved it, or setup alerting\n* **[Rate limit](/docs/en/api/rate-limits) and [Priority Tier](/docs/en/api/service-tiers#get-started-with-priority-tier) optimization:** Optimize features like [prompt caching](/docs/en/build-with-claude/prompt-caching) or specific prompts to make the most of one’s allocated capacity, or purchase dedicated capacity.\n* **Advanced Analysis:** Perform deeper data analysis than what's available in Console\n\n<Check>\n  **Admin API key required**\n  \n  This API is part of the [Admin API](/docs/en/build-with-claude/administration-api). These endpoints require an Admin API key (starting with `sk-ant-admin...`) that differs from standard API keys. Only organization members with the admin role can provision Admin API keys through the [Claude Console](/settings/admin-keys).\n</Check>\n\nLeading observability platforms offer ready-to-use integrations for monitoring your Claude API usage and cost, without writing custom code. These integrations provide dashboards, alerting, and analytics to help you manage your API usage effectively.\n\n<CardGroup cols={3}>\n  <Card title=\"CloudZero\" icon=\"chart\" href=\"https://docs.cloudzero.com/docs/connections-anthropic\">\n    Cloud intelligence platform for tracking and forecasting costs\n  </Card>\n  <Card title=\"Datadog\" icon=\"chart\" href=\"https://docs.datadoghq.com/integrations/anthropic/\">\n    LLM Observability with automatic tracing and monitoring\n  </Card>\n  <Card title=\"Grafana Cloud\" icon=\"chart\" href=\"https://grafana.com/docs/grafana-cloud/monitor-infrastructure/integrations/integration-reference/integration-anthropic/\">\n    Agentless integration for easy LLM observability with out-of-the-box dashboards and alerts\n  </Card>\n  <Card title=\"Honeycomb\" icon=\"polygon\" href=\"https://docs.honeycomb.io/integrations/anthropic-usage-monitoring/\">\n    Advanced querying and visualization through OpenTelemetry\n  </Card>\n  <Card title=\"Vantage\" icon=\"chart\" href=\"https://docs.vantage.sh/connecting_anthropic\">\n    FinOps platform for LLM cost & usage observability\n  </Card>\n</CardGroup>\n\nGet your organization's daily usage for the last 7 days:\n\n<Tip>\n  **Set a User-Agent header for integrations**\n  \n  If you're building an integration, set your User-Agent header to help us understand usage patterns:\n  \n</Tip>\n\nTrack token consumption across your organization with detailed breakdowns by model, workspace, and service tier with the `/v1/organizations/usage_report/messages` endpoint.\n\n- **Time buckets**: Aggregate usage data in fixed intervals (`1m`, `1h`, or `1d`)\n- **Token tracking**: Measure uncached input, cached input, cache creation, and output tokens\n- **Filtering & grouping**: Filter by API key, workspace, model, service tier, or context window, and group results by these dimensions\n- **Server tool usage**: Track usage of server-side tools like web search\n\nFor complete parameter details and response schemas, see the [Usage API reference](/docs/en/api/admin-api/usage-cost/get-messages-usage-report).\n\n#### Daily usage by model\n\n#### Hourly usage with filtering\n\n#### Filter usage by API keys and workspaces\n\n<Tip>\nTo retrieve your organization's API key IDs, use the [List API Keys](/docs/en/api/admin-api/apikeys/list-api-keys) endpoint.\n\nTo retrieve your organization's workspace IDs, use the [List Workspaces](/docs/en/api/admin-api/workspaces/list-workspaces) endpoint, or find your organization's workspace IDs in the Anthropic Console.\n</Tip>\n\n### Time granularity limits\n\n| Granularity | Default Limit | Maximum Limit | Use Case |\n|-------------|---------------|---------------|----------|\n| `1m` | 60 buckets | 1440 buckets | Real-time monitoring |\n| `1h` | 24 buckets | 168 buckets | Daily patterns |\n| `1d` | 7 buckets | 31 buckets | Weekly/monthly reports |\n\nRetrieve service-level cost breakdowns in USD with the `/v1/organizations/cost_report` endpoint.\n\n- **Currency**: All costs in USD, reported as decimal strings in lowest units (cents)\n- **Cost types**: Track token usage, web search, and code execution costs\n- **Grouping**: Group costs by workspace or description for detailed breakdowns\n- **Time buckets**: Daily granularity only (`1d`)\n\nFor complete parameter details and response schemas, see the [Cost API reference](/docs/en/api/admin-api/usage-cost/get-cost-report).\n\n<Warning>\n  Priority Tier costs use a different billing model and are not included in the cost endpoint. Track Priority Tier usage through the usage endpoint instead.\n</Warning>\n\nBoth endpoints support pagination for large datasets:\n\n1. Make your initial request\n2. If `has_more` is `true`, use the `next_page` value in your next request\n3. Continue until `has_more` is `false`",
  "code_samples": [
    {
      "code": "curl \"https://api.anthropic.com/v1/organizations/usage_report/messages?\\\nstarting_at=2025-01-08T00:00:00Z&\\\nending_at=2025-01-15T00:00:00Z&\\\nbucket_width=1d\" \\\n  --header \"anthropic-version: 2023-06-01\" \\\n  --header \"x-api-key: $ADMIN_API_KEY\"",
      "language": "bash"
    },
    {
      "code": "User-Agent: YourApp/1.0.0 (https://yourapp.com)",
      "language": "unknown"
    },
    {
      "code": "curl \"https://api.anthropic.com/v1/organizations/usage_report/messages?\\\nstarting_at=2025-01-01T00:00:00Z&\\\nending_at=2025-01-08T00:00:00Z&\\\ngroup_by[]=model&\\\nbucket_width=1d\" \\\n  --header \"anthropic-version: 2023-06-01\" \\\n  --header \"x-api-key: $ADMIN_API_KEY\"",
      "language": "bash"
    },
    {
      "code": "curl \"https://api.anthropic.com/v1/organizations/usage_report/messages?\\\nstarting_at=2025-01-15T00:00:00Z&\\\nending_at=2025-01-15T23:59:59Z&\\\nmodels[]=claude-sonnet-4-5-20250929&\\\nservice_tiers[]=batch&\\\ncontext_window[]=0-200k&\\\nbucket_width=1h\" \\\n  --header \"anthropic-version: 2023-06-01\" \\\n  --header \"x-api-key: $ADMIN_API_KEY\"",
      "language": "bash"
    },
    {
      "code": "curl \"https://api.anthropic.com/v1/organizations/usage_report/messages?\\\nstarting_at=2025-01-01T00:00:00Z&\\\nending_at=2025-01-08T00:00:00Z&\\\napi_key_ids[]=apikey_01Rj2N8SVvo6BePZj99NhmiT&\\\napi_key_ids[]=apikey_01ABC123DEF456GHI789JKL&\\\nworkspace_ids[]=wrkspc_01JwQvzr7rXLA5AGx3HKfFUJ&\\\nworkspace_ids[]=wrkspc_01XYZ789ABC123DEF456MNO&\\\nbucket_width=1d\" \\\n  --header \"anthropic-version: 2023-06-01\" \\\n  --header \"x-api-key: $ADMIN_API_KEY\"",
      "language": "bash"
    },
    {
      "code": "curl \"https://api.anthropic.com/v1/organizations/cost_report?\\\nstarting_at=2025-01-01T00:00:00Z&\\\nending_at=2025-01-31T00:00:00Z&\\\ngroup_by[]=workspace_id&\\\ngroup_by[]=description\" \\\n  --header \"anthropic-version: 2023-06-01\" \\\n  --header \"x-api-key: $ADMIN_API_KEY\"",
      "language": "bash"
    }
  ],
  "headings": [
    {
      "level": "h2",
      "text": "Partner solutions",
      "id": "partner-solutions"
    },
    {
      "level": "h2",
      "text": "Quick start",
      "id": "quick-start"
    },
    {
      "level": "h2",
      "text": "Usage API",
      "id": "usage-api"
    },
    {
      "level": "h3",
      "text": "Key concepts",
      "id": "key-concepts"
    },
    {
      "level": "h3",
      "text": "Basic examples",
      "id": "basic-examples"
    },
    {
      "level": "h3",
      "text": "Time granularity limits",
      "id": "time-granularity-limits"
    },
    {
      "level": "h2",
      "text": "Cost API",
      "id": "cost-api"
    },
    {
      "level": "h3",
      "text": "Key concepts",
      "id": "key-concepts"
    },
    {
      "level": "h3",
      "text": "Basic example",
      "id": "basic-example"
    },
    {
      "level": "h2",
      "text": "Pagination",
      "id": "pagination"
    }
  ],
  "url": "llms-txt#usage-and-cost-api",
  "links": []
}