{
  "title": "Using the Messages API",
  "content": "Practical patterns and examples for using the Messages API effectively\n\nThis guide covers common patterns for working with the Messages API, including basic requests, multi-turn conversations, prefill techniques, and vision capabilities. For complete API specifications, see the [Messages API reference](/docs/en/api/messages).\n\n## Basic request and response\n\n## Multiple conversational turns\n\nThe Messages API is stateless, which means that you always send the full conversational history to the API. You can use this pattern to build up a conversation over time. Earlier conversational turns don't necessarily need to actually originate from Claude — you can use synthetic `assistant` messages.\n\n## Putting words in Claude's mouth\n\nYou can pre-fill part of Claude's response in the last position of the input messages list. This can be used to shape Claude's response. The example below uses `\"max_tokens\": 1` to get a single multiple choice answer from Claude.\n\nFor more information on prefill techniques, see our [prefill guide](/docs/en/build-with-claude/prompt-engineering/prefill-claudes-response).\n\nClaude can read both text and images in requests. We support both `base64` and `url` source types for images, and the `image/jpeg`, `image/png`, `image/gif`, and `image/webp` media types. See our [vision guide](/docs/en/build-with-claude/vision) for more details.\n\n## Tool use and computer use\n\nSee our [guide](/docs/en/agents-and-tools/tool-use/overview) for examples of how to use tools with the Messages API.\nSee our [computer use guide](/docs/en/agents-and-tools/tool-use/computer-use-tool) for examples of how to control desktop computer environments with the Messages API.\nFor guaranteed JSON output, see [Structured Outputs](/docs/en/build-with-claude/structured-outputs).",
  "code_samples": [
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "</CodeGroup>",
      "language": "unknown"
    },
    {
      "code": "## Multiple conversational turns\n\nThe Messages API is stateless, which means that you always send the full conversational history to the API. You can use this pattern to build up a conversation over time. Earlier conversational turns don't necessarily need to actually originate from Claude — you can use synthetic `assistant` messages.\n\n<CodeGroup>",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "</CodeGroup>",
      "language": "unknown"
    },
    {
      "code": "## Putting words in Claude's mouth\n\nYou can pre-fill part of Claude's response in the last position of the input messages list. This can be used to shape Claude's response. The example below uses `\"max_tokens\": 1` to get a single multiple choice answer from Claude.\n\n<CodeGroup>",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "</CodeGroup>",
      "language": "unknown"
    },
    {
      "code": "For more information on prefill techniques, see our [prefill guide](/docs/en/build-with-claude/prompt-engineering/prefill-claudes-response).\n\n## Vision\n\nClaude can read both text and images in requests. We support both `base64` and `url` source types for images, and the `image/jpeg`, `image/png`, `image/gif`, and `image/webp` media types. See our [vision guide](/docs/en/build-with-claude/vision) for more details.\n\n<CodeGroup>",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "</CodeGroup>",
      "language": "unknown"
    }
  ],
  "headings": [
    {
      "level": "h2",
      "text": "Basic request and response",
      "id": "basic-request-and-response"
    },
    {
      "level": "h2",
      "text": "Multiple conversational turns",
      "id": "multiple-conversational-turns"
    },
    {
      "level": "h2",
      "text": "Putting words in Claude's mouth",
      "id": "putting-words-in-claude's-mouth"
    },
    {
      "level": "h2",
      "text": "Vision",
      "id": "vision"
    },
    {
      "level": "h2",
      "text": "Tool use and computer use",
      "id": "tool-use-and-computer-use"
    },
    {
      "level": "h3",
      "text": "Capabilities",
      "id": "capabilities"
    }
  ],
  "url": "llms-txt#using-the-messages-api",
  "links": []
}