{
  "title": "Agent SDK reference - TypeScript",
  "content": "Complete API reference for the TypeScript Agent SDK, including all functions, types, and interfaces.\n\n<script src=\"/components/typescript-sdk-type-links.js\" defer />\n\n<Note>\n**Try the new V2 interface (preview):** A simplified interface with `send()` and `receive()` patterns is now available, making multi-turn conversations easier. [Learn more about the TypeScript V2 preview](/docs/en/agent-sdk/typescript-v2-preview)\n</Note>\n\nThe primary function for interacting with Claude Code. Creates an async generator that streams messages as they arrive.\n\n| Parameter | Type | Description |\n| :-------- | :--- | :---------- |\n| `prompt` | `string \\| AsyncIterable<`[`SDKUserMessage`](#sdkusermessage)`>` | The input prompt as a string or async iterable for streaming mode |\n| `options` | [`Options`](#options) | Optional configuration object (see Options type below) |\n\nReturns a [`Query`](#query-1) object that extends `AsyncGenerator<`[`SDKMessage`](#sdkmessage)`, void>` with additional methods.\n\nCreates a type-safe MCP tool definition for use with SDK MCP servers.\n\n| Parameter | Type | Description |\n| :-------- | :--- | :---------- |\n| `name` | `string` | The name of the tool |\n| `description` | `string` | A description of what the tool does |\n| `inputSchema` | `Schema extends ZodRawShape` | Zod schema defining the tool's input parameters |\n| `handler` | `(args, extra) => Promise<`[`CallToolResult`](#calltoolresult)`>` | Async function that executes the tool logic |\n\n### `createSdkMcpServer()`\n\nCreates an MCP server instance that runs in the same process as your application.\n\n| Parameter | Type | Description |\n| :-------- | :--- | :---------- |\n| `options.name` | `string` | The name of the MCP server |\n| `options.version` | `string` | Optional version string |\n| `options.tools` | `Array<SdkMcpToolDefinition>` | Array of tool definitions created with [`tool()`](#tool) |\n\nConfiguration object for the `query()` function.\n\n| Property | Type | Default | Description |\n| :------- | :--- | :------ | :---------- |\n| `abortController` | `AbortController` | `new AbortController()` | Controller for cancelling operations |\n| `additionalDirectories` | `string[]` | `[]` | Additional directories Claude can access |\n| `agents` | `Record<string, [`AgentDefinition`](#agentdefinition)>` | `undefined` | Programmatically define subagents |\n| `allowDangerouslySkipPermissions` | `boolean` | `false` | Enable bypassing permissions. Required when using `permissionMode: 'bypassPermissions'` |\n| `allowedTools` | `string[]` | All tools | List of allowed tool names |\n| `betas` | [`SdkBeta`](#sdkbeta)`[]` | `[]` | Enable beta features (e.g., `['context-1m-2025-08-07']`) |\n| `canUseTool` | [`CanUseTool`](#canusetool) | `undefined` | Custom permission function for tool usage |\n| `continue` | `boolean` | `false` | Continue the most recent conversation |\n| `cwd` | `string` | `process.cwd()` | Current working directory |\n| `disallowedTools` | `string[]` | `[]` | List of disallowed tool names |\n| `enableFileCheckpointing` | `boolean` | `false` | Enable file change tracking for rewinding. See [File checkpointing](/docs/en/agent-sdk/file-checkpointing) |\n| `env` | `Dict<string>` | `process.env` | Environment variables |\n| `executable` | `'bun' \\| 'deno' \\| 'node'` | Auto-detected | JavaScript runtime to use |\n| `executableArgs` | `string[]` | `[]` | Arguments to pass to the executable |\n| `extraArgs` | `Record<string, string \\| null>` | `{}` | Additional arguments |\n| `fallbackModel` | `string` | `undefined` | Model to use if primary fails |\n| `forkSession` | `boolean` | `false` | When resuming with `resume`, fork to a new session ID instead of continuing the original session |\n| `hooks` | `Partial<Record<`[`HookEvent`](#hookevent)`, `[`HookCallbackMatcher`](#hookcallbackmatcher)`[]>>` | `{}` | Hook callbacks for events |\n| `includePartialMessages` | `boolean` | `false` | Include partial message events |\n| `maxBudgetUsd` | `number` | `undefined` | Maximum budget in USD for the query |\n| `maxThinkingTokens` | `number` | `undefined` | Maximum tokens for thinking process |\n| `maxTurns` | `number` | `undefined` | Maximum conversation turns |\n| `mcpServers` | `Record<string, [`McpServerConfig`](#mcpserverconfig)>` | `{}` | MCP server configurations |\n| `model` | `string` | Default from CLI | Claude model to use |\n| `outputFormat` | `{ type: 'json_schema', schema: JSONSchema }` | `undefined` | Define output format for agent results. See [Structured outputs](/docs/en/agent-sdk/structured-outputs) for details |\n| `pathToClaudeCodeExecutable` | `string` | Uses built-in executable | Path to Claude Code executable |\n| `permissionMode` | [`PermissionMode`](#permissionmode) | `'default'` | Permission mode for the session |\n| `permissionPromptToolName` | `string` | `undefined` | MCP tool name for permission prompts |\n| `plugins` | [`SdkPluginConfig`](#sdkpluginconfig)`[]` | `[]` | Load custom plugins from local paths. See [Plugins](/docs/en/agent-sdk/plugins) for details |\n| `resume` | `string` | `undefined` | Session ID to resume |\n| `resumeSessionAt` | `string` | `undefined` | Resume session at a specific message UUID |\n| `sandbox` | [`SandboxSettings`](#sandboxsettings) | `undefined` | Configure sandbox behavior programmatically. See [Sandbox settings](#sandboxsettings) for details |\n| `settingSources` | [`SettingSource`](#settingsource)`[]` | `[]` (no settings) | Control which filesystem settings to load. When omitted, no settings are loaded. **Note:** Must include `'project'` to load CLAUDE.md files |\n| `stderr` | `(data: string) => void` | `undefined` | Callback for stderr output |\n| `strictMcpConfig` | `boolean` | `false` | Enforce strict MCP validation |\n| `systemPrompt` | `string \\| { type: 'preset'; preset: 'claude_code'; append?: string }` | `undefined` (empty prompt) | System prompt configuration. Pass a string for custom prompt, or `{ type: 'preset', preset: 'claude_code' }` to use Claude Code's system prompt. When using the preset object form, add `append` to extend the system prompt with additional instructions |\n| `tools` | `string[] \\| { type: 'preset'; preset: 'claude_code' }` | `undefined` | Tool configuration. Pass an array of tool names or use the preset to get Claude Code's default tools |\n\nInterface returned by the `query()` function.\n\n| Method | Description |\n| :----- | :---------- |\n| `interrupt()` | Interrupts the query (only available in streaming input mode) |\n| `rewindFiles(userMessageUuid)` | Restores files to their state at the specified user message. Requires `enableFileCheckpointing: true`. See [File checkpointing](/docs/en/agent-sdk/file-checkpointing) |\n| `setPermissionMode()` | Changes the permission mode (only available in streaming input mode) |\n| `setModel()` | Changes the model (only available in streaming input mode) |\n| `setMaxThinkingTokens()` | Changes the maximum thinking tokens (only available in streaming input mode) |\n| `supportedCommands()` | Returns available slash commands |\n| `supportedModels()` | Returns available models with display info |\n| `mcpServerStatus()` | Returns status of connected MCP servers |\n| `accountInfo()` | Returns account information |\n\n### `AgentDefinition`\n\nConfiguration for a subagent defined programmatically.\n\n| Field | Required | Description |\n|:------|:---------|:------------|\n| `description` | Yes | Natural language description of when to use this agent |\n| `tools` | No | Array of allowed tool names. If omitted, inherits all tools |\n| `prompt` | Yes | The agent's system prompt |\n| `model` | No | Model override for this agent. If omitted, uses the main model |\n\nControls which filesystem-based configuration sources the SDK loads settings from.\n\n| Value | Description | Location |\n|:------|:------------|:---------|\n| `'user'` | Global user settings | `~/.claude/settings.json` |\n| `'project'` | Shared project settings (version controlled) | `.claude/settings.json` |\n| `'local'` | Local project settings (gitignored) | `.claude/settings.local.json` |\n\n#### Default behavior\n\nWhen `settingSources` is **omitted** or **undefined**, the SDK does **not** load any filesystem settings. This provides isolation for SDK applications.\n\n#### Why use settingSources?\n\n**Load all filesystem settings (legacy behavior):**\n\n**Load only specific setting sources:**\n\n**Testing and CI environments:**\n\n**SDK-only applications:**\n\n**Loading CLAUDE.md project instructions:**\n\n#### Settings precedence\n\nWhen multiple sources are loaded, settings are merged with this precedence (highest to lowest):\n1. Local settings (`.claude/settings.local.json`)\n2. Project settings (`.claude/settings.json`)\n3. User settings (`~/.claude/settings.json`)\n\nProgrammatic options (like `agents`, `allowedTools`) always override filesystem settings.\n\nCustom permission function type for controlling tool usage.\n\n### `PermissionResult`\n\nResult of a permission check.\n\n### `McpServerConfig`\n\nConfiguration for MCP servers.\n\n#### `McpStdioServerConfig`\n\n#### `McpSSEServerConfig`\n\n#### `McpHttpServerConfig`\n\n#### `McpSdkServerConfigWithInstance`\n\n### `SdkPluginConfig`\n\nConfiguration for loading plugins in the SDK.\n\n| Field | Type | Description |\n|:------|:-----|:------------|\n| `type` | `'local'` | Must be `'local'` (only local plugins currently supported) |\n| `path` | `string` | Absolute or relative path to the plugin directory |\n\nFor complete information on creating and using plugins, see [Plugins](/docs/en/agent-sdk/plugins).\n\nUnion type of all possible messages returned by the query.\n\n### `SDKAssistantMessage`\n\nAssistant response message.\n\n### `SDKUserMessageReplay`\n\nReplayed user message with required UUID.\n\n### `SDKResultMessage`\n\nFinal result message.\n\n### `SDKSystemMessage`\n\nSystem initialization message.\n\n### `SDKPartialAssistantMessage`\n\nStreaming partial message (only when `includePartialMessages` is true).\n\n### `SDKCompactBoundaryMessage`\n\nMessage indicating a conversation compaction boundary.\n\n### `SDKPermissionDenial`\n\nInformation about a denied tool use.\n\nFor a comprehensive guide on using hooks with examples and common patterns, see the [Hooks guide](/docs/en/agent-sdk/hooks).\n\nAvailable hook events.\n\nHook callback function type.\n\n### `HookCallbackMatcher`\n\nHook configuration with optional matcher.\n\nUnion type of all hook input types.\n\nBase interface that all hook input types extend.\n\n#### `PreToolUseHookInput`\n\n#### `PostToolUseHookInput`\n\n#### `PostToolUseFailureHookInput`\n\n#### `NotificationHookInput`\n\n#### `UserPromptSubmitHookInput`\n\n#### `SessionStartHookInput`\n\n#### `SessionEndHookInput`\n\n#### `SubagentStartHookInput`\n\n#### `SubagentStopHookInput`\n\n#### `PreCompactHookInput`\n\n#### `PermissionRequestHookInput`\n\n#### `AsyncHookJSONOutput`\n\n#### `SyncHookJSONOutput`\n\nDocumentation of input schemas for all built-in Claude Code tools. These types are exported from `@anthropic-ai/claude-agent-sdk` and can be used for type-safe tool interactions.\n\n**Note:** This is a documentation-only type for clarity. It represents the union of all tool input types.\n\n**Tool name:** `Task`\n\nLaunches a new agent to handle complex, multi-step tasks autonomously.\n\n**Tool name:** `AskUserQuestion`\n\nAsks the user clarifying questions during execution. See [Handle approvals and user input](/docs/en/agent-sdk/user-input#handle-clarifying-questions) for usage details.\n\n**Tool name:** `Bash`\n\nExecutes bash commands in a persistent shell session with optional timeout and background execution.\n\n**Tool name:** `BashOutput`\n\nRetrieves output from a running or completed background bash shell.\n\n**Tool name:** `Edit`\n\nPerforms exact string replacements in files.\n\n**Tool name:** `Read`\n\nReads files from the local filesystem, including text, images, PDFs, and Jupyter notebooks.\n\n**Tool name:** `Write`\n\nWrites a file to the local filesystem, overwriting if it exists.\n\n**Tool name:** `Glob`\n\nFast file pattern matching that works with any codebase size.\n\n**Tool name:** `Grep`\n\nPowerful search tool built on ripgrep with regex support.\n\n**Tool name:** `KillBash`\n\nKills a running background bash shell by its ID.\n\n**Tool name:** `NotebookEdit`\n\nEdits cells in Jupyter notebook files.\n\n**Tool name:** `WebFetch`\n\nFetches content from a URL and processes it with an AI model.\n\n**Tool name:** `WebSearch`\n\nSearches the web and returns formatted results.\n\n**Tool name:** `TodoWrite`\n\nCreates and manages a structured task list for tracking progress.\n\n**Tool name:** `ExitPlanMode`\n\nExits planning mode and prompts the user to approve the plan.\n\n**Tool name:** `ListMcpResources`\n\nLists available MCP resources from connected servers.\n\n**Tool name:** `ReadMcpResource`\n\nReads a specific MCP resource from a server.\n\nDocumentation of output schemas for all built-in Claude Code tools. These types represent the actual response data returned by each tool.\n\n**Note:** This is a documentation-only type for clarity. It represents the union of all tool output types.\n\n**Tool name:** `Task`\n\nReturns the final result from the subagent after completing the delegated task.\n\n**Tool name:** `AskUserQuestion`\n\nReturns the questions asked and the user's answers.\n\n**Tool name:** `Bash`\n\nReturns command output with exit status. Background commands return immediately with a shellId.\n\n**Tool name:** `BashOutput`\n\nReturns incremental output from background shells.\n\n**Tool name:** `Edit`\n\nReturns confirmation of successful edits with replacement count.\n\n**Tool name:** `Read`\n\nReturns file contents in format appropriate to file type.\n\n**Tool name:** `Write`\n\nReturns confirmation after successfully writing the file.\n\n**Tool name:** `Glob`\n\nReturns file paths matching the glob pattern, sorted by modification time.\n\n**Tool name:** `Grep`\n\nReturns search results in the format specified by output_mode.\n\n**Tool name:** `KillBash`\n\nReturns confirmation after terminating the background shell.\n\n**Tool name:** `NotebookEdit`\n\nReturns confirmation after modifying the Jupyter notebook.\n\n**Tool name:** `WebFetch`\n\nReturns the AI's analysis of the fetched web content.\n\n**Tool name:** `WebSearch`\n\nReturns formatted search results from the web.\n\n**Tool name:** `TodoWrite`\n\nReturns confirmation with current task statistics.\n\n**Tool name:** `ExitPlanMode`\n\nReturns confirmation after exiting plan mode.\n\n**Tool name:** `ListMcpResources`\n\nReturns list of available MCP resources.\n\n**Tool name:** `ReadMcpResource`\n\nReturns the contents of the requested MCP resource.\n\n### `PermissionUpdate`\n\nOperations for updating permissions.\n\n### `PermissionBehavior`\n\n### `PermissionUpdateDestination`\n\n### `PermissionRuleValue`\n\nAvailable beta features that can be enabled via the `betas` option. See [Beta headers](/docs/en/api/beta-headers) for more information.\n\n| Value | Description | Compatible Models |\n|:------|:------------|:------------------|\n| `'context-1m-2025-08-07'` | Enables 1 million token [context window](/docs/en/build-with-claude/context-windows) | Claude Sonnet 4, Claude Sonnet 4.5 |\n\nInformation about an available slash command.\n\nInformation about an available model.\n\n### `McpServerStatus`\n\nStatus of a connected MCP server.\n\nAccount information for the authenticated user.\n\nPer-model usage statistics returned in result messages.\n\n### `NonNullableUsage`\n\nA version of [`Usage`](#usage) with all nullable fields made non-nullable.\n\nToken usage statistics (from `@anthropic-ai/sdk`).\n\nMCP tool result type (from `@modelcontextprotocol/sdk/types.js`).\n\nCustom error class for abort operations.\n\n## Sandbox Configuration\n\n### `SandboxSettings`\n\nConfiguration for sandbox behavior. Use this to enable command sandboxing and configure network restrictions programmatically.\n\n| Property | Type | Default | Description |\n| :------- | :--- | :------ | :---------- |\n| `enabled` | `boolean` | `false` | Enable sandbox mode for command execution |\n| `autoAllowBashIfSandboxed` | `boolean` | `false` | Auto-approve bash commands when sandbox is enabled |\n| `excludedCommands` | `string[]` | `[]` | Commands that always bypass sandbox restrictions (e.g., `['docker']`). These run unsandboxed automatically without model involvement |\n| `allowUnsandboxedCommands` | `boolean` | `false` | Allow the model to request running commands outside the sandbox. When `true`, the model can set `dangerouslyDisableSandbox` in tool input, which falls back to the [permissions system](#permissions-fallback-for-unsandboxed-commands) |\n| `network` | [`NetworkSandboxSettings`](#networksandboxsettings) | `undefined` | Network-specific sandbox configuration |\n| `ignoreViolations` | [`SandboxIgnoreViolations`](#sandboxignoreviolations) | `undefined` | Configure which sandbox violations to ignore |\n| `enableWeakerNestedSandbox` | `boolean` | `false` | Enable a weaker nested sandbox for compatibility |\n\n<Note>\n**Filesystem and network access restrictions** are NOT configured via sandbox settings. Instead, they are derived from [permission rules](https://code.claude.com/docs/en/settings#permission-settings):\n\n- **Filesystem read restrictions**: Read deny rules\n- **Filesystem write restrictions**: Edit allow/deny rules\n- **Network restrictions**: WebFetch allow/deny rules\n\nUse sandbox settings for command execution sandboxing, and permission rules for filesystem and network access control.\n</Note>\n\n### `NetworkSandboxSettings`\n\nNetwork-specific configuration for sandbox mode.\n\n| Property | Type | Default | Description |\n| :------- | :--- | :------ | :---------- |\n| `allowLocalBinding` | `boolean` | `false` | Allow processes to bind to local ports (e.g., for dev servers) |\n| `allowUnixSockets` | `string[]` | `[]` | Unix socket paths that processes can access (e.g., Docker socket) |\n| `allowAllUnixSockets` | `boolean` | `false` | Allow access to all Unix sockets |\n| `httpProxyPort` | `number` | `undefined` | HTTP proxy port for network requests |\n| `socksProxyPort` | `number` | `undefined` | SOCKS proxy port for network requests |\n\n### `SandboxIgnoreViolations`\n\nConfiguration for ignoring specific sandbox violations.\n\n| Property | Type | Default | Description |\n| :------- | :--- | :------ | :---------- |\n| `file` | `string[]` | `[]` | File path patterns to ignore violations for |\n| `network` | `string[]` | `[]` | Network patterns to ignore violations for |\n\n### Permissions Fallback for Unsandboxed Commands\n\nWhen `allowUnsandboxedCommands` is enabled, the model can request to run commands outside the sandbox by setting `dangerouslyDisableSandbox: true` in the tool input. These requests fall back to the existing permissions system, meaning your `canUseTool` handler will be invoked, allowing you to implement custom authorization logic.\n\n<Note>\n**`excludedCommands` vs `allowUnsandboxedCommands`:**\n- `excludedCommands`: A static list of commands that always bypass the sandbox automatically (e.g., `['docker']`). The model has no control over this.\n- `allowUnsandboxedCommands`: Lets the model decide at runtime whether to request unsandboxed execution by setting `dangerouslyDisableSandbox: true` in the tool input.\n</Note>\n\nThis pattern enables you to:\n\n- **Audit model requests**: Log when the model requests unsandboxed execution\n- **Implement allowlists**: Only permit specific commands to run unsandboxed\n- **Add approval workflows**: Require explicit authorization for privileged operations\n\n<Warning>\nCommands running with `dangerouslyDisableSandbox: true` have full system access. Ensure your `canUseTool` handler validates these requests carefully.\n</Warning>\n\n- [SDK overview](/docs/en/agent-sdk/overview) - General SDK concepts\n- [Python SDK reference](/docs/en/agent-sdk/python) - Python SDK documentation\n- [CLI reference](https://code.claude.com/docs/en/cli-reference) - Command-line interface\n- [Common workflows](https://code.claude.com/docs/en/common-workflows) - Step-by-step guides",
  "code_samples": [
    {
      "code": "npm install @anthropic-ai/claude-agent-sdk",
      "language": "bash"
    },
    {
      "code": "function query({\n  prompt,\n  options\n}: {\n  prompt: string | AsyncIterable<SDKUserMessage>;\n  options?: Options;\n}): Query",
      "language": "typescript"
    },
    {
      "code": "function tool<Schema extends ZodRawShape>(\n  name: string,\n  description: string,\n  inputSchema: Schema,\n  handler: (args: z.infer<ZodObject<Schema>>, extra: unknown) => Promise<CallToolResult>\n): SdkMcpToolDefinition<Schema>",
      "language": "typescript"
    },
    {
      "code": "function createSdkMcpServer(options: {\n  name: string;\n  version?: string;\n  tools?: Array<SdkMcpToolDefinition<any>>;\n}): McpSdkServerConfigWithInstance",
      "language": "typescript"
    },
    {
      "code": "interface Query extends AsyncGenerator<SDKMessage, void> {\n  interrupt(): Promise<void>;\n  rewindFiles(userMessageUuid: string): Promise<void>;\n  setPermissionMode(mode: PermissionMode): Promise<void>;\n  setModel(model?: string): Promise<void>;\n  setMaxThinkingTokens(maxThinkingTokens: number | null): Promise<void>;\n  supportedCommands(): Promise<SlashCommand[]>;\n  supportedModels(): Promise<ModelInfo[]>;\n  mcpServerStatus(): Promise<McpServerStatus[]>;\n  accountInfo(): Promise<AccountInfo>;\n}",
      "language": "typescript"
    },
    {
      "code": "type AgentDefinition = {\n  description: string;\n  tools?: string[];\n  prompt: string;\n  model?: 'sonnet' | 'opus' | 'haiku' | 'inherit';\n}",
      "language": "typescript"
    },
    {
      "code": "type SettingSource = 'user' | 'project' | 'local';",
      "language": "typescript"
    },
    {
      "code": "// Load all settings like SDK v0.0.x did\nconst result = query({\n  prompt: \"Analyze this code\",\n  options: {\n    settingSources: ['user', 'project', 'local']  // Load all settings\n  }\n});",
      "language": "typescript"
    },
    {
      "code": "// Load only project settings, ignore user and local\nconst result = query({\n  prompt: \"Run CI checks\",\n  options: {\n    settingSources: ['project']  // Only .claude/settings.json\n  }\n});",
      "language": "typescript"
    },
    {
      "code": "// Ensure consistent behavior in CI by excluding local settings\nconst result = query({\n  prompt: \"Run tests\",\n  options: {\n    settingSources: ['project'],  // Only team-shared settings\n    permissionMode: 'bypassPermissions'\n  }\n});",
      "language": "typescript"
    },
    {
      "code": "// Define everything programmatically (default behavior)\n// No filesystem dependencies - settingSources defaults to []\nconst result = query({\n  prompt: \"Review this PR\",\n  options: {\n    // settingSources: [] is the default, no need to specify\n    agents: { /* ... */ },\n    mcpServers: { /* ... */ },\n    allowedTools: ['Read', 'Grep', 'Glob']\n  }\n});",
      "language": "typescript"
    },
    {
      "code": "// Load project settings to include CLAUDE.md files\nconst result = query({\n  prompt: \"Add a new feature following project conventions\",\n  options: {\n    systemPrompt: {\n      type: 'preset',\n      preset: 'claude_code'  // Required to use CLAUDE.md\n    },\n    settingSources: ['project'],  // Loads CLAUDE.md from project directory\n    allowedTools: ['Read', 'Write', 'Edit']\n  }\n});",
      "language": "typescript"
    },
    {
      "code": "type PermissionMode =\n  | 'default'           // Standard permission behavior\n  | 'acceptEdits'       // Auto-accept file edits\n  | 'bypassPermissions' // Bypass all permission checks\n  | 'plan'              // Planning mode - no execution",
      "language": "typescript"
    },
    {
      "code": "type CanUseTool = (\n  toolName: string,\n  input: ToolInput,\n  options: {\n    signal: AbortSignal;\n    suggestions?: PermissionUpdate[];\n  }\n) => Promise<PermissionResult>;",
      "language": "typescript"
    },
    {
      "code": "type PermissionResult = \n  | {\n      behavior: 'allow';\n      updatedInput: ToolInput;\n      updatedPermissions?: PermissionUpdate[];\n    }\n  | {\n      behavior: 'deny';\n      message: string;\n      interrupt?: boolean;\n    }",
      "language": "typescript"
    },
    {
      "code": "type McpServerConfig = \n  | McpStdioServerConfig\n  | McpSSEServerConfig\n  | McpHttpServerConfig\n  | McpSdkServerConfigWithInstance;",
      "language": "typescript"
    },
    {
      "code": "type McpStdioServerConfig = {\n  type?: 'stdio';\n  command: string;\n  args?: string[];\n  env?: Record<string, string>;\n}",
      "language": "typescript"
    },
    {
      "code": "type McpSSEServerConfig = {\n  type: 'sse';\n  url: string;\n  headers?: Record<string, string>;\n}",
      "language": "typescript"
    },
    {
      "code": "type McpHttpServerConfig = {\n  type: 'http';\n  url: string;\n  headers?: Record<string, string>;\n}",
      "language": "typescript"
    },
    {
      "code": "type McpSdkServerConfigWithInstance = {\n  type: 'sdk';\n  name: string;\n  instance: McpServer;\n}",
      "language": "typescript"
    },
    {
      "code": "type SdkPluginConfig = {\n  type: 'local';\n  path: string;\n}",
      "language": "typescript"
    },
    {
      "code": "plugins: [\n  { type: 'local', path: './my-plugin' },\n  { type: 'local', path: '/absolute/path/to/plugin' }\n]",
      "language": "typescript"
    },
    {
      "code": "type SDKMessage = \n  | SDKAssistantMessage\n  | SDKUserMessage\n  | SDKUserMessageReplay\n  | SDKResultMessage\n  | SDKSystemMessage\n  | SDKPartialAssistantMessage\n  | SDKCompactBoundaryMessage;",
      "language": "typescript"
    },
    {
      "code": "type SDKAssistantMessage = {\n  type: 'assistant';\n  uuid: UUID;\n  session_id: string;\n  message: APIAssistantMessage; // From Anthropic SDK\n  parent_tool_use_id: string | null;\n}",
      "language": "typescript"
    },
    {
      "code": "type SDKUserMessage = {\n  type: 'user';\n  uuid?: UUID;\n  session_id: string;\n  message: APIUserMessage; // From Anthropic SDK\n  parent_tool_use_id: string | null;\n}",
      "language": "typescript"
    },
    {
      "code": "type SDKUserMessageReplay = {\n  type: 'user';\n  uuid: UUID;\n  session_id: string;\n  message: APIUserMessage;\n  parent_tool_use_id: string | null;\n}",
      "language": "typescript"
    },
    {
      "code": "type SDKResultMessage =\n  | {\n      type: 'result';\n      subtype: 'success';\n      uuid: UUID;\n      session_id: string;\n      duration_ms: number;\n      duration_api_ms: number;\n      is_error: boolean;\n      num_turns: number;\n      result: string;\n      total_cost_usd: number;\n      usage: NonNullableUsage;\n      modelUsage: { [modelName: string]: ModelUsage };\n      permission_denials: SDKPermissionDenial[];\n      structured_output?: unknown;\n    }\n  | {\n      type: 'result';\n      subtype:\n        | 'error_max_turns'\n        | 'error_during_execution'\n        | 'error_max_budget_usd'\n        | 'error_max_structured_output_retries';\n      uuid: UUID;\n      session_id: string;\n      duration_ms: number;\n      duration_api_ms: number;\n      is_error: boolean;\n      num_turns: number;\n      total_cost_usd: number;\n      usage: NonNullableUsage;\n      modelUsage: { [modelName: string]: ModelUsage };\n      permission_denials: SDKPermissionDenial[];\n      errors: string[];\n    }",
      "language": "typescript"
    },
    {
      "code": "type SDKSystemMessage = {\n  type: 'system';\n  subtype: 'init';\n  uuid: UUID;\n  session_id: string;\n  apiKeySource: ApiKeySource;\n  cwd: string;\n  tools: string[];\n  mcp_servers: {\n    name: string;\n    status: string;\n  }[];\n  model: string;\n  permissionMode: PermissionMode;\n  slash_commands: string[];\n  output_style: string;\n}",
      "language": "typescript"
    },
    {
      "code": "type SDKPartialAssistantMessage = {\n  type: 'stream_event';\n  event: RawMessageStreamEvent; // From Anthropic SDK\n  parent_tool_use_id: string | null;\n  uuid: UUID;\n  session_id: string;\n}",
      "language": "typescript"
    },
    {
      "code": "type SDKCompactBoundaryMessage = {\n  type: 'system';\n  subtype: 'compact_boundary';\n  uuid: UUID;\n  session_id: string;\n  compact_metadata: {\n    trigger: 'manual' | 'auto';\n    pre_tokens: number;\n  };\n}",
      "language": "typescript"
    },
    {
      "code": "type SDKPermissionDenial = {\n  tool_name: string;\n  tool_use_id: string;\n  tool_input: ToolInput;\n}",
      "language": "typescript"
    },
    {
      "code": "type HookEvent =\n  | 'PreToolUse'\n  | 'PostToolUse'\n  | 'PostToolUseFailure'\n  | 'Notification'\n  | 'UserPromptSubmit'\n  | 'SessionStart'\n  | 'SessionEnd'\n  | 'Stop'\n  | 'SubagentStart'\n  | 'SubagentStop'\n  | 'PreCompact'\n  | 'PermissionRequest';",
      "language": "typescript"
    },
    {
      "code": "type HookCallback = (\n  input: HookInput, // Union of all hook input types\n  toolUseID: string | undefined,\n  options: { signal: AbortSignal }\n) => Promise<HookJSONOutput>;",
      "language": "typescript"
    },
    {
      "code": "interface HookCallbackMatcher {\n  matcher?: string;\n  hooks: HookCallback[];\n}",
      "language": "typescript"
    },
    {
      "code": "type HookInput =\n  | PreToolUseHookInput\n  | PostToolUseHookInput\n  | PostToolUseFailureHookInput\n  | NotificationHookInput\n  | UserPromptSubmitHookInput\n  | SessionStartHookInput\n  | SessionEndHookInput\n  | StopHookInput\n  | SubagentStartHookInput\n  | SubagentStopHookInput\n  | PreCompactHookInput\n  | PermissionRequestHookInput;",
      "language": "typescript"
    },
    {
      "code": "type BaseHookInput = {\n  session_id: string;\n  transcript_path: string;\n  cwd: string;\n  permission_mode?: string;\n}",
      "language": "typescript"
    },
    {
      "code": "type PreToolUseHookInput = BaseHookInput & {\n  hook_event_name: 'PreToolUse';\n  tool_name: string;\n  tool_input: unknown;\n}",
      "language": "typescript"
    },
    {
      "code": "type PostToolUseHookInput = BaseHookInput & {\n  hook_event_name: 'PostToolUse';\n  tool_name: string;\n  tool_input: unknown;\n  tool_response: unknown;\n}",
      "language": "typescript"
    },
    {
      "code": "type PostToolUseFailureHookInput = BaseHookInput & {\n  hook_event_name: 'PostToolUseFailure';\n  tool_name: string;\n  tool_input: unknown;\n  error: string;\n  is_interrupt?: boolean;\n}",
      "language": "typescript"
    },
    {
      "code": "type NotificationHookInput = BaseHookInput & {\n  hook_event_name: 'Notification';\n  message: string;\n  title?: string;\n}",
      "language": "typescript"
    },
    {
      "code": "type UserPromptSubmitHookInput = BaseHookInput & {\n  hook_event_name: 'UserPromptSubmit';\n  prompt: string;\n}",
      "language": "typescript"
    },
    {
      "code": "type SessionStartHookInput = BaseHookInput & {\n  hook_event_name: 'SessionStart';\n  source: 'startup' | 'resume' | 'clear' | 'compact';\n}",
      "language": "typescript"
    },
    {
      "code": "type SessionEndHookInput = BaseHookInput & {\n  hook_event_name: 'SessionEnd';\n  reason: ExitReason;  // String from EXIT_REASONS array\n}",
      "language": "typescript"
    },
    {
      "code": "type StopHookInput = BaseHookInput & {\n  hook_event_name: 'Stop';\n  stop_hook_active: boolean;\n}",
      "language": "typescript"
    },
    {
      "code": "type SubagentStartHookInput = BaseHookInput & {\n  hook_event_name: 'SubagentStart';\n  agent_id: string;\n  agent_type: string;\n}",
      "language": "typescript"
    },
    {
      "code": "type SubagentStopHookInput = BaseHookInput & {\n  hook_event_name: 'SubagentStop';\n  stop_hook_active: boolean;\n}",
      "language": "typescript"
    },
    {
      "code": "type PreCompactHookInput = BaseHookInput & {\n  hook_event_name: 'PreCompact';\n  trigger: 'manual' | 'auto';\n  custom_instructions: string | null;\n}",
      "language": "typescript"
    },
    {
      "code": "type PermissionRequestHookInput = BaseHookInput & {\n  hook_event_name: 'PermissionRequest';\n  tool_name: string;\n  tool_input: unknown;\n  permission_suggestions?: PermissionUpdate[];\n}",
      "language": "typescript"
    },
    {
      "code": "type HookJSONOutput = AsyncHookJSONOutput | SyncHookJSONOutput;",
      "language": "typescript"
    },
    {
      "code": "type AsyncHookJSONOutput = {\n  async: true;\n  asyncTimeout?: number;\n}",
      "language": "typescript"
    },
    {
      "code": "type SyncHookJSONOutput = {\n  continue?: boolean;\n  suppressOutput?: boolean;\n  stopReason?: string;\n  decision?: 'approve' | 'block';\n  systemMessage?: string;\n  reason?: string;\n  hookSpecificOutput?:\n    | {\n        hookEventName: 'PreToolUse';\n        permissionDecision?: 'allow' | 'deny' | 'ask';\n        permissionDecisionReason?: string;\n        updatedInput?: Record<string, unknown>;\n      }\n    | {\n        hookEventName: 'UserPromptSubmit';\n        additionalContext?: string;\n      }\n    | {\n        hookEventName: 'SessionStart';\n        additionalContext?: string;\n      }\n    | {\n        hookEventName: 'PostToolUse';\n        additionalContext?: string;\n      };\n}",
      "language": "typescript"
    },
    {
      "code": "type ToolInput =\n  | AgentInput\n  | AskUserQuestionInput\n  | BashInput\n  | BashOutputInput\n  | FileEditInput\n  | FileReadInput\n  | FileWriteInput\n  | GlobInput\n  | GrepInput\n  | KillShellInput\n  | NotebookEditInput\n  | WebFetchInput\n  | WebSearchInput\n  | TodoWriteInput\n  | ExitPlanModeInput\n  | ListMcpResourcesInput\n  | ReadMcpResourceInput;",
      "language": "typescript"
    },
    {
      "code": "interface AgentInput {\n  /**\n   * A short (3-5 word) description of the task\n   */\n  description: string;\n  /**\n   * The task for the agent to perform\n   */\n  prompt: string;\n  /**\n   * The type of specialized agent to use for this task\n   */\n  subagent_type: string;\n}",
      "language": "typescript"
    },
    {
      "code": "interface AskUserQuestionInput {\n  /**\n   * Questions to ask the user (1-4 questions)\n   */\n  questions: Array<{\n    /**\n     * The complete question to ask the user. Should be clear, specific,\n     * and end with a question mark.\n     */\n    question: string;\n    /**\n     * Very short label displayed as a chip/tag (max 12 chars).\n     * Examples: \"Auth method\", \"Library\", \"Approach\"\n     */\n    header: string;\n    /**\n     * The available choices (2-4 options). An \"Other\" option is\n     * automatically provided.\n     */\n    options: Array<{\n      /**\n       * Display text for this option (1-5 words)\n       */\n      label: string;\n      /**\n       * Explanation of what this option means\n       */\n      description: string;\n    }>;\n    /**\n     * Set to true to allow multiple selections\n     */\n    multiSelect: boolean;\n  }>;\n  /**\n   * User answers populated by the permission system.\n   * Maps question text to selected option label(s).\n   * Multi-select answers are comma-separated.\n   */\n  answers?: Record<string, string>;\n}",
      "language": "typescript"
    },
    {
      "code": "interface BashInput {\n  /**\n   * The command to execute\n   */\n  command: string;\n  /**\n   * Optional timeout in milliseconds (max 600000)\n   */\n  timeout?: number;\n  /**\n   * Clear, concise description of what this command does in 5-10 words\n   */\n  description?: string;\n  /**\n   * Set to true to run this command in the background\n   */\n  run_in_background?: boolean;\n}",
      "language": "typescript"
    },
    {
      "code": "interface BashOutputInput {\n  /**\n   * The ID of the background shell to retrieve output from\n   */\n  bash_id: string;\n  /**\n   * Optional regex to filter output lines\n   */\n  filter?: string;\n}",
      "language": "typescript"
    },
    {
      "code": "interface FileEditInput {\n  /**\n   * The absolute path to the file to modify\n   */\n  file_path: string;\n  /**\n   * The text to replace\n   */\n  old_string: string;\n  /**\n   * The text to replace it with (must be different from old_string)\n   */\n  new_string: string;\n  /**\n   * Replace all occurrences of old_string (default false)\n   */\n  replace_all?: boolean;\n}",
      "language": "typescript"
    },
    {
      "code": "interface FileReadInput {\n  /**\n   * The absolute path to the file to read\n   */\n  file_path: string;\n  /**\n   * The line number to start reading from\n   */\n  offset?: number;\n  /**\n   * The number of lines to read\n   */\n  limit?: number;\n}",
      "language": "typescript"
    },
    {
      "code": "interface FileWriteInput {\n  /**\n   * The absolute path to the file to write\n   */\n  file_path: string;\n  /**\n   * The content to write to the file\n   */\n  content: string;\n}",
      "language": "typescript"
    },
    {
      "code": "interface GlobInput {\n  /**\n   * The glob pattern to match files against\n   */\n  pattern: string;\n  /**\n   * The directory to search in (defaults to cwd)\n   */\n  path?: string;\n}",
      "language": "typescript"
    },
    {
      "code": "interface GrepInput {\n  /**\n   * The regular expression pattern to search for\n   */\n  pattern: string;\n  /**\n   * File or directory to search in (defaults to cwd)\n   */\n  path?: string;\n  /**\n   * Glob pattern to filter files (e.g. \"*.js\")\n   */\n  glob?: string;\n  /**\n   * File type to search (e.g. \"js\", \"py\", \"rust\")\n   */\n  type?: string;\n  /**\n   * Output mode: \"content\", \"files_with_matches\", or \"count\"\n   */\n  output_mode?: 'content' | 'files_with_matches' | 'count';\n  /**\n   * Case insensitive search\n   */\n  '-i'?: boolean;\n  /**\n   * Show line numbers (for content mode)\n   */\n  '-n'?: boolean;\n  /**\n   * Lines to show before each match\n   */\n  '-B'?: number;\n  /**\n   * Lines to show after each match\n   */\n  '-A'?: number;\n  /**\n   * Lines to show before and after each match\n   */\n  '-C'?: number;\n  /**\n   * Limit output to first N lines/entries\n   */\n  head_limit?: number;\n  /**\n   * Enable multiline mode\n   */\n  multiline?: boolean;\n}",
      "language": "typescript"
    },
    {
      "code": "interface KillShellInput {\n  /**\n   * The ID of the background shell to kill\n   */\n  shell_id: string;\n}",
      "language": "typescript"
    },
    {
      "code": "interface NotebookEditInput {\n  /**\n   * The absolute path to the Jupyter notebook file\n   */\n  notebook_path: string;\n  /**\n   * The ID of the cell to edit\n   */\n  cell_id?: string;\n  /**\n   * The new source for the cell\n   */\n  new_source: string;\n  /**\n   * The type of the cell (code or markdown)\n   */\n  cell_type?: 'code' | 'markdown';\n  /**\n   * The type of edit (replace, insert, delete)\n   */\n  edit_mode?: 'replace' | 'insert' | 'delete';\n}",
      "language": "typescript"
    },
    {
      "code": "interface WebFetchInput {\n  /**\n   * The URL to fetch content from\n   */\n  url: string;\n  /**\n   * The prompt to run on the fetched content\n   */\n  prompt: string;\n}",
      "language": "typescript"
    },
    {
      "code": "interface WebSearchInput {\n  /**\n   * The search query to use\n   */\n  query: string;\n  /**\n   * Only include results from these domains\n   */\n  allowed_domains?: string[];\n  /**\n   * Never include results from these domains\n   */\n  blocked_domains?: string[];\n}",
      "language": "typescript"
    },
    {
      "code": "interface TodoWriteInput {\n  /**\n   * The updated todo list\n   */\n  todos: Array<{\n    /**\n     * The task description\n     */\n    content: string;\n    /**\n     * The task status\n     */\n    status: 'pending' | 'in_progress' | 'completed';\n    /**\n     * Active form of the task description\n     */\n    activeForm: string;\n  }>;\n}",
      "language": "typescript"
    },
    {
      "code": "interface ExitPlanModeInput {\n  /**\n   * The plan to run by the user for approval\n   */\n  plan: string;\n}",
      "language": "typescript"
    },
    {
      "code": "interface ListMcpResourcesInput {\n  /**\n   * Optional server name to filter resources by\n   */\n  server?: string;\n}",
      "language": "typescript"
    },
    {
      "code": "interface ReadMcpResourceInput {\n  /**\n   * The MCP server name\n   */\n  server: string;\n  /**\n   * The resource URI to read\n   */\n  uri: string;\n}",
      "language": "typescript"
    },
    {
      "code": "type ToolOutput =\n  | TaskOutput\n  | AskUserQuestionOutput\n  | BashOutput\n  | BashOutputToolOutput\n  | EditOutput\n  | ReadOutput\n  | WriteOutput\n  | GlobOutput\n  | GrepOutput\n  | KillBashOutput\n  | NotebookEditOutput\n  | WebFetchOutput\n  | WebSearchOutput\n  | TodoWriteOutput\n  | ExitPlanModeOutput\n  | ListMcpResourcesOutput\n  | ReadMcpResourceOutput;",
      "language": "typescript"
    },
    {
      "code": "interface TaskOutput {\n  /**\n   * Final result message from the subagent\n   */\n  result: string;\n  /**\n   * Token usage statistics\n   */\n  usage?: {\n    input_tokens: number;\n    output_tokens: number;\n    cache_creation_input_tokens?: number;\n    cache_read_input_tokens?: number;\n  };\n  /**\n   * Total cost in USD\n   */\n  total_cost_usd?: number;\n  /**\n   * Execution duration in milliseconds\n   */\n  duration_ms?: number;\n}",
      "language": "typescript"
    },
    {
      "code": "interface AskUserQuestionOutput {\n  /**\n   * The questions that were asked\n   */\n  questions: Array<{\n    question: string;\n    header: string;\n    options: Array<{\n      label: string;\n      description: string;\n    }>;\n    multiSelect: boolean;\n  }>;\n  /**\n   * The answers provided by the user.\n   * Maps question text to answer string.\n   * Multi-select answers are comma-separated.\n   */\n  answers: Record<string, string>;\n}",
      "language": "typescript"
    },
    {
      "code": "interface BashOutput {\n  /**\n   * Combined stdout and stderr output\n   */\n  output: string;\n  /**\n   * Exit code of the command\n   */\n  exitCode: number;\n  /**\n   * Whether the command was killed due to timeout\n   */\n  killed?: boolean;\n  /**\n   * Shell ID for background processes\n   */\n  shellId?: string;\n}",
      "language": "typescript"
    },
    {
      "code": "interface BashOutputToolOutput {\n  /**\n   * New output since last check\n   */\n  output: string;\n  /**\n   * Current shell status\n   */\n  status: 'running' | 'completed' | 'failed';\n  /**\n   * Exit code (when completed)\n   */\n  exitCode?: number;\n}",
      "language": "typescript"
    },
    {
      "code": "interface EditOutput {\n  /**\n   * Confirmation message\n   */\n  message: string;\n  /**\n   * Number of replacements made\n   */\n  replacements: number;\n  /**\n   * File path that was edited\n   */\n  file_path: string;\n}",
      "language": "typescript"
    },
    {
      "code": "type ReadOutput = \n  | TextFileOutput\n  | ImageFileOutput\n  | PDFFileOutput\n  | NotebookFileOutput;\n\ninterface TextFileOutput {\n  /**\n   * File contents with line numbers\n   */\n  content: string;\n  /**\n   * Total number of lines in file\n   */\n  total_lines: number;\n  /**\n   * Lines actually returned\n   */\n  lines_returned: number;\n}\n\ninterface ImageFileOutput {\n  /**\n   * Base64 encoded image data\n   */\n  image: string;\n  /**\n   * Image MIME type\n   */\n  mime_type: string;\n  /**\n   * File size in bytes\n   */\n  file_size: number;\n}\n\ninterface PDFFileOutput {\n  /**\n   * Array of page contents\n   */\n  pages: Array<{\n    page_number: number;\n    text?: string;\n    images?: Array<{\n      image: string;\n      mime_type: string;\n    }>;\n  }>;\n  /**\n   * Total number of pages\n   */\n  total_pages: number;\n}\n\ninterface NotebookFileOutput {\n  /**\n   * Jupyter notebook cells\n   */\n  cells: Array<{\n    cell_type: 'code' | 'markdown';\n    source: string;\n    outputs?: any[];\n    execution_count?: number;\n  }>;\n  /**\n   * Notebook metadata\n   */\n  metadata?: Record<string, any>;\n}",
      "language": "typescript"
    },
    {
      "code": "interface WriteOutput {\n  /**\n   * Success message\n   */\n  message: string;\n  /**\n   * Number of bytes written\n   */\n  bytes_written: number;\n  /**\n   * File path that was written\n   */\n  file_path: string;\n}",
      "language": "typescript"
    },
    {
      "code": "interface GlobOutput {\n  /**\n   * Array of matching file paths\n   */\n  matches: string[];\n  /**\n   * Number of matches found\n   */\n  count: number;\n  /**\n   * Search directory used\n   */\n  search_path: string;\n}",
      "language": "typescript"
    },
    {
      "code": "type GrepOutput = \n  | GrepContentOutput\n  | GrepFilesOutput\n  | GrepCountOutput;\n\ninterface GrepContentOutput {\n  /**\n   * Matching lines with context\n   */\n  matches: Array<{\n    file: string;\n    line_number?: number;\n    line: string;\n    before_context?: string[];\n    after_context?: string[];\n  }>;\n  /**\n   * Total number of matches\n   */\n  total_matches: number;\n}\n\ninterface GrepFilesOutput {\n  /**\n   * Files containing matches\n   */\n  files: string[];\n  /**\n   * Number of files with matches\n   */\n  count: number;\n}\n\ninterface GrepCountOutput {\n  /**\n   * Match counts per file\n   */\n  counts: Array<{\n    file: string;\n    count: number;\n  }>;\n  /**\n   * Total matches across all files\n   */\n  total: number;\n}",
      "language": "typescript"
    },
    {
      "code": "interface KillBashOutput {\n  /**\n   * Success message\n   */\n  message: string;\n  /**\n   * ID of the killed shell\n   */\n  shell_id: string;\n}",
      "language": "typescript"
    },
    {
      "code": "interface NotebookEditOutput {\n  /**\n   * Success message\n   */\n  message: string;\n  /**\n   * Type of edit performed\n   */\n  edit_type: 'replaced' | 'inserted' | 'deleted';\n  /**\n   * Cell ID that was affected\n   */\n  cell_id?: string;\n  /**\n   * Total cells in notebook after edit\n   */\n  total_cells: number;\n}",
      "language": "typescript"
    },
    {
      "code": "interface WebFetchOutput {\n  /**\n   * AI model's response to the prompt\n   */\n  response: string;\n  /**\n   * URL that was fetched\n   */\n  url: string;\n  /**\n   * Final URL after redirects\n   */\n  final_url?: string;\n  /**\n   * HTTP status code\n   */\n  status_code?: number;\n}",
      "language": "typescript"
    },
    {
      "code": "interface WebSearchOutput {\n  /**\n   * Search results\n   */\n  results: Array<{\n    title: string;\n    url: string;\n    snippet: string;\n    /**\n     * Additional metadata if available\n     */\n    metadata?: Record<string, any>;\n  }>;\n  /**\n   * Total number of results\n   */\n  total_results: number;\n  /**\n   * The query that was searched\n   */\n  query: string;\n}",
      "language": "typescript"
    },
    {
      "code": "interface TodoWriteOutput {\n  /**\n   * Success message\n   */\n  message: string;\n  /**\n   * Current todo statistics\n   */\n  stats: {\n    total: number;\n    pending: number;\n    in_progress: number;\n    completed: number;\n  };\n}",
      "language": "typescript"
    },
    {
      "code": "interface ExitPlanModeOutput {\n  /**\n   * Confirmation message\n   */\n  message: string;\n  /**\n   * Whether user approved the plan\n   */\n  approved?: boolean;\n}",
      "language": "typescript"
    },
    {
      "code": "interface ListMcpResourcesOutput {\n  /**\n   * Available resources\n   */\n  resources: Array<{\n    uri: string;\n    name: string;\n    description?: string;\n    mimeType?: string;\n    server: string;\n  }>;\n  /**\n   * Total number of resources\n   */\n  total: number;\n}",
      "language": "typescript"
    },
    {
      "code": "interface ReadMcpResourceOutput {\n  /**\n   * Resource contents\n   */\n  contents: Array<{\n    uri: string;\n    mimeType?: string;\n    text?: string;\n    blob?: string;\n  }>;\n  /**\n   * Server that provided the resource\n   */\n  server: string;\n}",
      "language": "typescript"
    },
    {
      "code": "type PermissionUpdate = \n  | {\n      type: 'addRules';\n      rules: PermissionRuleValue[];\n      behavior: PermissionBehavior;\n      destination: PermissionUpdateDestination;\n    }\n  | {\n      type: 'replaceRules';\n      rules: PermissionRuleValue[];\n      behavior: PermissionBehavior;\n      destination: PermissionUpdateDestination;\n    }\n  | {\n      type: 'removeRules';\n      rules: PermissionRuleValue[];\n      behavior: PermissionBehavior;\n      destination: PermissionUpdateDestination;\n    }\n  | {\n      type: 'setMode';\n      mode: PermissionMode;\n      destination: PermissionUpdateDestination;\n    }\n  | {\n      type: 'addDirectories';\n      directories: string[];\n      destination: PermissionUpdateDestination;\n    }\n  | {\n      type: 'removeDirectories';\n      directories: string[];\n      destination: PermissionUpdateDestination;\n    }",
      "language": "typescript"
    },
    {
      "code": "type PermissionBehavior = 'allow' | 'deny' | 'ask';",
      "language": "typescript"
    },
    {
      "code": "type PermissionUpdateDestination = \n  | 'userSettings'     // Global user settings\n  | 'projectSettings'  // Per-directory project settings\n  | 'localSettings'    // Gitignored local settings\n  | 'session'          // Current session only",
      "language": "typescript"
    },
    {
      "code": "type PermissionRuleValue = {\n  toolName: string;\n  ruleContent?: string;\n}",
      "language": "typescript"
    },
    {
      "code": "type ApiKeySource = 'user' | 'project' | 'org' | 'temporary';",
      "language": "typescript"
    },
    {
      "code": "type SdkBeta = 'context-1m-2025-08-07';",
      "language": "typescript"
    },
    {
      "code": "type SlashCommand = {\n  name: string;\n  description: string;\n  argumentHint: string;\n}",
      "language": "typescript"
    },
    {
      "code": "type ModelInfo = {\n  value: string;\n  displayName: string;\n  description: string;\n}",
      "language": "typescript"
    },
    {
      "code": "type McpServerStatus = {\n  name: string;\n  status: 'connected' | 'failed' | 'needs-auth' | 'pending';\n  serverInfo?: {\n    name: string;\n    version: string;\n  };\n}",
      "language": "typescript"
    },
    {
      "code": "type AccountInfo = {\n  email?: string;\n  organization?: string;\n  subscriptionType?: string;\n  tokenSource?: string;\n  apiKeySource?: string;\n}",
      "language": "typescript"
    },
    {
      "code": "type ModelUsage = {\n  inputTokens: number;\n  outputTokens: number;\n  cacheReadInputTokens: number;\n  cacheCreationInputTokens: number;\n  webSearchRequests: number;\n  costUSD: number;\n  contextWindow: number;\n}",
      "language": "typescript"
    },
    {
      "code": "type ConfigScope = 'local' | 'user' | 'project';",
      "language": "typescript"
    },
    {
      "code": "type NonNullableUsage = {\n  [K in keyof Usage]: NonNullable<Usage[K]>;\n}",
      "language": "typescript"
    },
    {
      "code": "type Usage = {\n  input_tokens: number | null;\n  output_tokens: number | null;\n  cache_creation_input_tokens?: number | null;\n  cache_read_input_tokens?: number | null;\n}",
      "language": "typescript"
    },
    {
      "code": "type CallToolResult = {\n  content: Array<{\n    type: 'text' | 'image' | 'resource';\n    // Additional fields vary by type\n  }>;\n  isError?: boolean;\n}",
      "language": "typescript"
    },
    {
      "code": "class AbortError extends Error {}",
      "language": "typescript"
    },
    {
      "code": "type SandboxSettings = {\n  enabled?: boolean;\n  autoAllowBashIfSandboxed?: boolean;\n  excludedCommands?: string[];\n  allowUnsandboxedCommands?: boolean;\n  network?: NetworkSandboxSettings;\n  ignoreViolations?: SandboxIgnoreViolations;\n  enableWeakerNestedSandbox?: boolean;\n}",
      "language": "typescript"
    },
    {
      "code": "import { query } from \"@anthropic-ai/claude-agent-sdk\";\n\nconst result = await query({\n  prompt: \"Build and test my project\",\n  options: {\n    sandbox: {\n      enabled: true,\n      autoAllowBashIfSandboxed: true,\n      excludedCommands: [\"docker\"],\n      network: {\n        allowLocalBinding: true,\n        allowUnixSockets: [\"/var/run/docker.sock\"]\n      }\n    }\n  }\n});",
      "language": "typescript"
    },
    {
      "code": "type NetworkSandboxSettings = {\n  allowLocalBinding?: boolean;\n  allowUnixSockets?: string[];\n  allowAllUnixSockets?: boolean;\n  httpProxyPort?: number;\n  socksProxyPort?: number;\n}",
      "language": "typescript"
    },
    {
      "code": "type SandboxIgnoreViolations = {\n  file?: string[];\n  network?: string[];\n}",
      "language": "typescript"
    },
    {
      "code": "import { query } from \"@anthropic-ai/claude-agent-sdk\";\n\nconst result = await query({\n  prompt: \"Deploy my application\",\n  options: {\n    sandbox: {\n      enabled: true,\n      allowUnsandboxedCommands: true  // Model can request unsandboxed execution\n    },\n    permissionMode: \"default\",\n    canUseTool: async (tool, input) => {\n      // Check if the model is requesting to bypass the sandbox\n      if (tool === \"Bash\" && input.dangerouslyDisableSandbox) {\n        // The model wants to run this command outside the sandbox\n        console.log(`Unsandboxed command requested: ${input.command}`);\n\n        // Return true to allow, false to deny\n        return isCommandAuthorized(input.command);\n      }\n      return true;\n    }\n  }\n});",
      "language": "typescript"
    }
  ],
  "headings": [
    {
      "level": "h2",
      "text": "Installation",
      "id": "installation"
    },
    {
      "level": "h2",
      "text": "Functions",
      "id": "functions"
    },
    {
      "level": "h3",
      "text": "`query()`",
      "id": "`query()`"
    },
    {
      "level": "h3",
      "text": "`tool()`",
      "id": "`tool()`"
    },
    {
      "level": "h3",
      "text": "`createSdkMcpServer()`",
      "id": "`createsdkmcpserver()`"
    },
    {
      "level": "h2",
      "text": "Types",
      "id": "types"
    },
    {
      "level": "h3",
      "text": "`Options`",
      "id": "`options`"
    },
    {
      "level": "h3",
      "text": "`Query`",
      "id": "`query`"
    },
    {
      "level": "h3",
      "text": "`AgentDefinition`",
      "id": "`agentdefinition`"
    },
    {
      "level": "h3",
      "text": "`SettingSource`",
      "id": "`settingsource`"
    },
    {
      "level": "h3",
      "text": "`PermissionMode`",
      "id": "`permissionmode`"
    },
    {
      "level": "h3",
      "text": "`CanUseTool`",
      "id": "`canusetool`"
    },
    {
      "level": "h3",
      "text": "`PermissionResult`",
      "id": "`permissionresult`"
    },
    {
      "level": "h3",
      "text": "`McpServerConfig`",
      "id": "`mcpserverconfig`"
    },
    {
      "level": "h3",
      "text": "`SdkPluginConfig`",
      "id": "`sdkpluginconfig`"
    },
    {
      "level": "h2",
      "text": "Message Types",
      "id": "message-types"
    },
    {
      "level": "h3",
      "text": "`SDKMessage`",
      "id": "`sdkmessage`"
    },
    {
      "level": "h3",
      "text": "`SDKAssistantMessage`",
      "id": "`sdkassistantmessage`"
    },
    {
      "level": "h3",
      "text": "`SDKUserMessage`",
      "id": "`sdkusermessage`"
    },
    {
      "level": "h3",
      "text": "`SDKUserMessageReplay`",
      "id": "`sdkusermessagereplay`"
    },
    {
      "level": "h3",
      "text": "`SDKResultMessage`",
      "id": "`sdkresultmessage`"
    },
    {
      "level": "h3",
      "text": "`SDKSystemMessage`",
      "id": "`sdksystemmessage`"
    },
    {
      "level": "h3",
      "text": "`SDKPartialAssistantMessage`",
      "id": "`sdkpartialassistantmessage`"
    },
    {
      "level": "h3",
      "text": "`SDKCompactBoundaryMessage`",
      "id": "`sdkcompactboundarymessage`"
    },
    {
      "level": "h3",
      "text": "`SDKPermissionDenial`",
      "id": "`sdkpermissiondenial`"
    },
    {
      "level": "h2",
      "text": "Hook Types",
      "id": "hook-types"
    },
    {
      "level": "h3",
      "text": "`HookEvent`",
      "id": "`hookevent`"
    },
    {
      "level": "h3",
      "text": "`HookCallback`",
      "id": "`hookcallback`"
    },
    {
      "level": "h3",
      "text": "`HookCallbackMatcher`",
      "id": "`hookcallbackmatcher`"
    },
    {
      "level": "h3",
      "text": "`HookInput`",
      "id": "`hookinput`"
    },
    {
      "level": "h3",
      "text": "`BaseHookInput`",
      "id": "`basehookinput`"
    },
    {
      "level": "h3",
      "text": "`HookJSONOutput`",
      "id": "`hookjsonoutput`"
    },
    {
      "level": "h2",
      "text": "Tool Input Types",
      "id": "tool-input-types"
    },
    {
      "level": "h3",
      "text": "`ToolInput`",
      "id": "`toolinput`"
    },
    {
      "level": "h3",
      "text": "Task",
      "id": "task"
    },
    {
      "level": "h3",
      "text": "AskUserQuestion",
      "id": "askuserquestion"
    },
    {
      "level": "h3",
      "text": "Bash",
      "id": "bash"
    },
    {
      "level": "h3",
      "text": "BashOutput",
      "id": "bashoutput"
    },
    {
      "level": "h3",
      "text": "Edit",
      "id": "edit"
    },
    {
      "level": "h3",
      "text": "Read",
      "id": "read"
    },
    {
      "level": "h3",
      "text": "Write",
      "id": "write"
    },
    {
      "level": "h3",
      "text": "Glob",
      "id": "glob"
    },
    {
      "level": "h3",
      "text": "Grep",
      "id": "grep"
    },
    {
      "level": "h3",
      "text": "KillBash",
      "id": "killbash"
    },
    {
      "level": "h3",
      "text": "NotebookEdit",
      "id": "notebookedit"
    },
    {
      "level": "h3",
      "text": "WebFetch",
      "id": "webfetch"
    },
    {
      "level": "h3",
      "text": "WebSearch",
      "id": "websearch"
    },
    {
      "level": "h3",
      "text": "TodoWrite",
      "id": "todowrite"
    },
    {
      "level": "h3",
      "text": "ExitPlanMode",
      "id": "exitplanmode"
    },
    {
      "level": "h3",
      "text": "ListMcpResources",
      "id": "listmcpresources"
    },
    {
      "level": "h3",
      "text": "ReadMcpResource",
      "id": "readmcpresource"
    },
    {
      "level": "h2",
      "text": "Tool Output Types",
      "id": "tool-output-types"
    },
    {
      "level": "h3",
      "text": "`ToolOutput`",
      "id": "`tooloutput`"
    },
    {
      "level": "h3",
      "text": "Task",
      "id": "task"
    },
    {
      "level": "h3",
      "text": "AskUserQuestion",
      "id": "askuserquestion"
    },
    {
      "level": "h3",
      "text": "Bash",
      "id": "bash"
    },
    {
      "level": "h3",
      "text": "BashOutput",
      "id": "bashoutput"
    },
    {
      "level": "h3",
      "text": "Edit",
      "id": "edit"
    },
    {
      "level": "h3",
      "text": "Read",
      "id": "read"
    },
    {
      "level": "h3",
      "text": "Write",
      "id": "write"
    },
    {
      "level": "h3",
      "text": "Glob",
      "id": "glob"
    },
    {
      "level": "h3",
      "text": "Grep",
      "id": "grep"
    },
    {
      "level": "h3",
      "text": "KillBash",
      "id": "killbash"
    },
    {
      "level": "h3",
      "text": "NotebookEdit",
      "id": "notebookedit"
    },
    {
      "level": "h3",
      "text": "WebFetch",
      "id": "webfetch"
    },
    {
      "level": "h3",
      "text": "WebSearch",
      "id": "websearch"
    },
    {
      "level": "h3",
      "text": "TodoWrite",
      "id": "todowrite"
    },
    {
      "level": "h3",
      "text": "ExitPlanMode",
      "id": "exitplanmode"
    },
    {
      "level": "h3",
      "text": "ListMcpResources",
      "id": "listmcpresources"
    },
    {
      "level": "h3",
      "text": "ReadMcpResource",
      "id": "readmcpresource"
    },
    {
      "level": "h2",
      "text": "Permission Types",
      "id": "permission-types"
    },
    {
      "level": "h3",
      "text": "`PermissionUpdate`",
      "id": "`permissionupdate`"
    },
    {
      "level": "h3",
      "text": "`PermissionBehavior`",
      "id": "`permissionbehavior`"
    },
    {
      "level": "h3",
      "text": "`PermissionUpdateDestination`",
      "id": "`permissionupdatedestination`"
    },
    {
      "level": "h3",
      "text": "`PermissionRuleValue`",
      "id": "`permissionrulevalue`"
    },
    {
      "level": "h2",
      "text": "Other Types",
      "id": "other-types"
    },
    {
      "level": "h3",
      "text": "`ApiKeySource`",
      "id": "`apikeysource`"
    },
    {
      "level": "h3",
      "text": "`SdkBeta`",
      "id": "`sdkbeta`"
    },
    {
      "level": "h3",
      "text": "`SlashCommand`",
      "id": "`slashcommand`"
    },
    {
      "level": "h3",
      "text": "`ModelInfo`",
      "id": "`modelinfo`"
    },
    {
      "level": "h3",
      "text": "`McpServerStatus`",
      "id": "`mcpserverstatus`"
    },
    {
      "level": "h3",
      "text": "`AccountInfo`",
      "id": "`accountinfo`"
    },
    {
      "level": "h3",
      "text": "`ModelUsage`",
      "id": "`modelusage`"
    },
    {
      "level": "h3",
      "text": "`ConfigScope`",
      "id": "`configscope`"
    },
    {
      "level": "h3",
      "text": "`NonNullableUsage`",
      "id": "`nonnullableusage`"
    },
    {
      "level": "h3",
      "text": "`Usage`",
      "id": "`usage`"
    },
    {
      "level": "h3",
      "text": "`CallToolResult`",
      "id": "`calltoolresult`"
    },
    {
      "level": "h3",
      "text": "`AbortError`",
      "id": "`aborterror`"
    },
    {
      "level": "h2",
      "text": "Sandbox Configuration",
      "id": "sandbox-configuration"
    },
    {
      "level": "h3",
      "text": "`SandboxSettings`",
      "id": "`sandboxsettings`"
    },
    {
      "level": "h3",
      "text": "`NetworkSandboxSettings`",
      "id": "`networksandboxsettings`"
    },
    {
      "level": "h3",
      "text": "`SandboxIgnoreViolations`",
      "id": "`sandboxignoreviolations`"
    },
    {
      "level": "h3",
      "text": "Permissions Fallback for Unsandboxed Commands",
      "id": "permissions-fallback-for-unsandboxed-commands"
    },
    {
      "level": "h2",
      "text": "See also",
      "id": "see-also"
    }
  ],
  "url": "llms-txt#agent-sdk-reference---typescript",
  "links": []
}