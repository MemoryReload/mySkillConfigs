{
  "title": "Use the file_id with code execution",
  "content": "response = client.beta.messages.create(\n    model=\"claude-sonnet-4-5\",\n    betas=[\"code-execution-2025-08-25\", \"files-api-2025-04-14\"],\n    max_tokens=4096,\n    messages=[{\n        \"role\": \"user\",\n        \"content\": [\n            {\"type\": \"text\", \"text\": \"Analyze this CSV data\"},\n            {\"type\": \"container_upload\", \"file_id\": file_object.id}\n        ]\n    }],\n    tools=[{\n        \"type\": \"code_execution_20250825\",\n        \"name\": \"code_execution\"\n    }]\n)\ntypescript TypeScript\nimport { Anthropic } from '@anthropic-ai/sdk';\nimport { createReadStream } from 'fs';\n\nconst anthropic = new Anthropic();\n\nasync function main() {\n  // Upload a file\n  const fileObject = await anthropic.beta.files.create({\n    file: createReadStream(\"data.csv\"),\n  });\n\n// Use the file_id with code execution\n  const response = await anthropic.beta.messages.create({\n    model: \"claude-sonnet-4-5\",\n    betas: [\"code-execution-2025-08-25\", \"files-api-2025-04-14\"],\n    max_tokens: 4096,\n    messages: [{\n      role: \"user\",\n      content: [\n        { type: \"text\", text: \"Analyze this CSV data\" },\n        { type: \"container_upload\", file_id: fileObject.id }\n      ]\n    }],\n    tools: [{\n      type: \"code_execution_20250825\",\n      name: \"code_execution\"\n    }]\n  });\n\nconsole.log(response);\n}\n\nmain().catch(console.error);\npython Python\nfrom anthropic import Anthropic",
  "code_samples": [
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "</CodeGroup>\n\n#### Retrieve generated files\n\nWhen Claude creates files during code execution, you can retrieve these files using the Files API:\n\n<CodeGroup>",
      "language": "unknown"
    }
  ],
  "headings": [],
  "url": "llms-txt#use-the-file_id-with-code-execution",
  "links": []
}