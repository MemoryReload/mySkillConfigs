{
  "title": "Subsequent request using cursor from response",
  "content": "curl \"https://api.anthropic.com/v1/organizations/usage_report/claude_code?\\\nstarting_at=2025-09-08&\\\npage=page_MjAyNS0wNS0xNFQwMDowMDowMFo=\" \\\n  --header \"anthropic-version: 2023-06-01\" \\\n  --header \"x-api-key: $ADMIN_API_KEY\"\njson\n{\n  \"data\": [\n    {\n      \"date\": \"2025-09-01T00:00:00Z\",\n      \"actor\": {\n        \"type\": \"user_actor\",\n        \"email_address\": \"developer@company.com\"\n      },\n      \"organization_id\": \"dc9f6c26-b22c-4831-8d01-0446bada88f1\",\n      \"customer_type\": \"api\",\n      \"terminal_type\": \"vscode\",\n      \"core_metrics\": {\n        \"num_sessions\": 5,\n        \"lines_of_code\": {\n          \"added\": 1543,\n          \"removed\": 892\n        },\n        \"commits_by_claude_code\": 12,\n        \"pull_requests_by_claude_code\": 2\n      },\n      \"tool_actions\": {\n        \"edit_tool\": {\n          \"accepted\": 45,\n          \"rejected\": 5\n        },\n        \"multi_edit_tool\": {\n          \"accepted\": 12,\n          \"rejected\": 2\n        },\n        \"write_tool\": {\n          \"accepted\": 8,\n          \"rejected\": 1\n        },\n        \"notebook_edit_tool\": {\n          \"accepted\": 3,\n          \"rejected\": 0\n        }\n      },\n      \"model_breakdown\": [\n        {\n          \"model\": \"claude-sonnet-4-5-20250929\",\n          \"tokens\": {\n            \"input\": 100000,\n            \"output\": 35000,\n            \"cache_read\": 10000,\n            \"cache_creation\": 5000\n          },\n          \"estimated_cost\": {\n            \"currency\": \"USD\",\n            \"amount\": 1025\n          }\n        }\n      ]\n    }\n  ],\n  \"has_more\": false,\n  \"next_page\": null\n}\n```\n\nThe API supports cursor-based pagination for organizations with large numbers of users:\n\n1. Make your initial request with optional `limit` parameter\n2. If `has_more` is `true` in the response, use the `next_page` value in your next request\n3. Continue until `has_more` is `false`\n\nThe cursor encodes the position of the last record and ensures stable pagination even as new data arrives. Each pagination session maintains a consistent data boundary to ensure you don't miss or duplicate records.\n\n- **Executive dashboards**: Create high-level reports showing Claude Code impact on development velocity\n- **AI tool comparison**: Export metrics to compare Claude Code with other AI coding tools like Copilot and Cursor\n- **Developer productivity analysis**: Track individual and team productivity metrics over time\n- **Cost tracking and allocation**: Monitor spending patterns and allocate costs by team or project\n- **Adoption monitoring**: Identify which teams and users are getting the most value from Claude Code\n- **ROI justification**: Provide concrete metrics to justify and expand Claude Code adoption internally\n\n## Frequently asked questions\n\n### How fresh is the analytics data?\nClaude Code analytics data typically appears within 1 hour of user activity completion. To ensure consistent pagination results, only data older than 1 hour is included in responses.\n\n### Can I get real-time metrics?\nNo, this API provides daily aggregated metrics only. For real-time monitoring, consider using the [OpenTelemetry integration](https://code.claude.com/docs/en/monitoring-usage).\n\n### How are users identified in the data?\nUsers are identified through the `actor` field in two ways:\n- **`user_actor`**: Contains `email_address` for users who authenticate via OAuth (most common)\n- **`api_actor`**: Contains `api_key_name` for users who authenticate via API key\n\nThe `customer_type` field indicates whether the usage is from `api` customers (API PAYG) or `subscription` customers (Pro/Team plans).\n\n### What's the data retention period?\nHistorical Claude Code analytics data is retained and accessible through the API. There is no specified deletion period for this data.\n\n### Which Claude Code deployments are supported?\nThis API only tracks Claude Code usage on the Claude API (1st party). Usage on Amazon Bedrock, Google Vertex AI, or other third-party platforms is not included.\n\n### What does it cost to use this API?\nThe Claude Code Analytics API is free to use for all organizations with access to the Admin API.\n\n### How do I calculate tool acceptance rates?\nTool acceptance rate = `accepted / (accepted + rejected)` for each tool type. For example, if the edit tool shows 45 accepted and 5 rejected, the acceptance rate is 90%.\n\n### What time zone is used for the date parameter?\nAll dates are in UTC. The `starting_at` parameter should be in YYYY-MM-DD format and represents UTC midnight for that day.\n\nThe Claude Code Analytics API helps you understand and optimize your team's development workflow. Learn more about related features:\n\n- [Admin API overview](/docs/en/build-with-claude/administration-api)\n- [Admin API reference](/docs/en/api/admin)\n- [Claude Code Analytics dashboard](/claude-code)\n- [Usage and Cost API](/docs/en/build-with-claude/usage-cost-api) - Track API usage across all Anthropic services\n- [Identity and access management](https://code.claude.com/docs/en/iam)\n- [Monitoring usage with OpenTelemetry](https://code.claude.com/docs/en/monitoring-usage) for custom metrics and alerting",
  "code_samples": [
    {
      "code": "### Request parameters\n\n| Parameter | Type | Required | Description |\n|-----------|------|----------|-------------|\n| `starting_at` | string | Yes | UTC date in YYYY-MM-DD format. Returns metrics for this single day only |\n| `limit` | integer | No | Number of records per page (default: 20, max: 1000) |\n| `page` | string | No | Opaque cursor token from previous response's `next_page` field |\n\n### Available metrics\n\nEach response record contains the following metrics for a single user on a single day:\n\n#### Dimensions\n- **date**: Date in RFC 3339 format (UTC timestamp)\n- **actor**: The user or API key that performed the Claude Code actions (either `user_actor` with `email_address` or `api_actor` with `api_key_name`)\n- **organization_id**: Organization UUID\n- **customer_type**: Type of customer account (`api` for API customers, `subscription` for Pro/Team customers)\n- **terminal_type**: Type of terminal or environment where Claude Code was used (e.g., `vscode`, `iTerm.app`, `tmux`)\n\n#### Core metrics\n- **num_sessions**: Number of distinct Claude Code sessions initiated by this actor\n- **lines_of_code.added**: Total number of lines of code added across all files by Claude Code\n- **lines_of_code.removed**: Total number of lines of code removed across all files by Claude Code\n- **commits_by_claude_code**: Number of git commits created through Claude Code's commit functionality\n- **pull_requests_by_claude_code**: Number of pull requests created through Claude Code's PR functionality\n\n#### Tool action metrics\nBreakdown of tool action acceptance and rejection rates by tool type:\n- **edit_tool.accepted/rejected**: Number of Edit tool proposals that the user accepted/rejected\n- **write_tool.accepted/rejected**: Number of Write tool proposals that the user accepted/rejected\n- **notebook_edit_tool.accepted/rejected**: Number of NotebookEdit tool proposals that the user accepted/rejected\n\n#### Model breakdown\nFor each Claude model used:\n- **model**: Claude model identifier (e.g., `claude-sonnet-4-5-20250929`)\n- **tokens.input/output**: Input and output token counts for this model\n- **tokens.cache_read/cache_creation**: Cache-related token usage for this model\n- **estimated_cost.amount**: Estimated cost in cents USD for this model\n- **estimated_cost.currency**: Currency code for the cost amount (currently always `USD`)\n\n### Response structure\n\nThe API returns data in the following format:",
      "language": "unknown"
    }
  ],
  "headings": [
    {
      "level": "h3",
      "text": "Request parameters",
      "id": "request-parameters"
    },
    {
      "level": "h3",
      "text": "Available metrics",
      "id": "available-metrics"
    },
    {
      "level": "h3",
      "text": "Response structure",
      "id": "response-structure"
    },
    {
      "level": "h2",
      "text": "Pagination",
      "id": "pagination"
    },
    {
      "level": "h2",
      "text": "Common use cases",
      "id": "common-use-cases"
    },
    {
      "level": "h2",
      "text": "Frequently asked questions",
      "id": "frequently-asked-questions"
    },
    {
      "level": "h3",
      "text": "How fresh is the analytics data?",
      "id": "how-fresh-is-the-analytics-data?"
    },
    {
      "level": "h3",
      "text": "Can I get real-time metrics?",
      "id": "can-i-get-real-time-metrics?"
    },
    {
      "level": "h3",
      "text": "How are users identified in the data?",
      "id": "how-are-users-identified-in-the-data?"
    },
    {
      "level": "h3",
      "text": "What's the data retention period?",
      "id": "what's-the-data-retention-period?"
    },
    {
      "level": "h3",
      "text": "Which Claude Code deployments are supported?",
      "id": "which-claude-code-deployments-are-supported?"
    },
    {
      "level": "h3",
      "text": "What does it cost to use this API?",
      "id": "what-does-it-cost-to-use-this-api?"
    },
    {
      "level": "h3",
      "text": "How do I calculate tool acceptance rates?",
      "id": "how-do-i-calculate-tool-acceptance-rates?"
    },
    {
      "level": "h3",
      "text": "What time zone is used for the date parameter?",
      "id": "what-time-zone-is-used-for-the-date-parameter?"
    },
    {
      "level": "h2",
      "text": "See also",
      "id": "see-also"
    }
  ],
  "url": "llms-txt#subsequent-request-using-cursor-from-response",
  "links": []
}