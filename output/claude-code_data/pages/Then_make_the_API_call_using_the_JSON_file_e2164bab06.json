{
  "title": "Then make the API call using the JSON file",
  "content": "curl https://api.anthropic.com/v1/messages/batches \\\n  -H \"content-type: application/json\" \\\n  -H \"x-api-key: $ANTHROPIC_API_KEY\" \\\n  -H \"anthropic-version: 2023-06-01\" \\\n  -d @request.json\npython Python\nmessage_batch = client.messages.batches.create(\n    requests=[\n        {\n            \"custom_id\": \"doc1\",\n            \"params\": {\n                \"model\": \"claude-sonnet-4-5\",\n                \"max_tokens\": 1024,\n                \"messages\": [\n                    {\n                        \"role\": \"user\",\n                        \"content\": [\n                            {\n                                \"type\": \"document\",\n                                \"source\": {\n                                    \"type\": \"base64\",\n                                    \"media_type\": \"application/pdf\",\n                                    \"data\": pdf_data\n                                }\n                            },\n                            {\n                                \"type\": \"text\",\n                                \"text\": \"Summarize this document.\"\n                            }\n                        ]\n                    }\n                ]\n            }\n        }\n    ]\n)\ntypescript TypeScript\nconst response = await anthropic.messages.batches.create({\n  requests: [\n    {\n      custom_id: 'my-first-request',\n      params: {\n        max_tokens: 1024,\n        messages: [\n          {\n            content: [\n              {\n                type: 'document',\n                source: {\n                  media_type: 'application/pdf',\n                  type: 'base64',\n                  data: pdfBase64,\n                },\n              },\n              {\n                type: 'text',\n                text: 'Which model has the highest human preference win rates across each use-case?',\n              },\n            ],\n            role: 'user',\n          },\n        ],\n        model: 'claude-sonnet-4-5',\n      },\n    },\n    {\n      custom_id: 'my-second-request',\n      params: {\n        max_tokens: 1024,\n        messages: [\n          {\n            content: [\n              {\n                type: 'document',\n                source: {\n                  media_type: 'application/pdf',\n                  type: 'base64',\n                  data: pdfBase64,\n                },\n              },\n              {\n                type: 'text',\n                text: 'Extract 5 key insights from this document.',\n              },\n            ],\n            role: 'user',\n          },\n        ],\n        model: 'claude-sonnet-4-5',\n      },\n    }\n  ],\n});\nconsole.log(response);\njava Java\nimport java.io.IOException;\nimport java.nio.file.Files;\nimport java.nio.file.Paths;\nimport java.util.List;\n\nimport com.anthropic.client.AnthropicClient;\nimport com.anthropic.client.okhttp.AnthropicOkHttpClient;\nimport com.anthropic.models.messages.*;\nimport com.anthropic.models.messages.batches.*;\n\npublic class MessagesBatchDocumentExample {\n\npublic static void main(String[] args) throws IOException {\n        AnthropicClient client = AnthropicOkHttpClient.fromEnv();\n\n// Read PDF file as base64\n        byte[] pdfBytes = Files.readAllBytes(Paths.get(\"pdf_base64.txt\"));\n        String pdfBase64 = new String(pdfBytes);\n\nBatchCreateParams params = BatchCreateParams.builder()\n                .addRequest(BatchCreateParams.Request.builder()\n                        .customId(\"my-first-request\")\n                        .params(BatchCreateParams.Request.Params.builder()\n                                .model(Model.CLAUDE_OPUS_4_20250514)\n                                .maxTokens(1024)\n                                .addUserMessageOfBlockParams(List.of(\n                                        ContentBlockParam.ofDocument(\n                                                DocumentBlockParam.builder()\n                                                        .source(Base64PdfSource.builder()\n                                                                .data(pdfBase64)\n                                                                .build())\n                                                        .build()\n                                        ),\n                                        ContentBlockParam.ofText(\n                                                TextBlockParam.builder()\n                                                        .text(\"Which model has the highest human preference win rates across each use-case?\")\n                                                        .build()\n                                        )\n                                ))\n                                .build())\n                        .build())\n                .addRequest(BatchCreateParams.Request.builder()\n                        .customId(\"my-second-request\")\n                        .params(BatchCreateParams.Request.Params.builder()\n                                .model(Model.CLAUDE_OPUS_4_20250514)\n                                .maxTokens(1024)\n                                .addUserMessageOfBlockParams(List.of(\n                                        ContentBlockParam.ofDocument(\n                                        DocumentBlockParam.builder()\n                                                .source(Base64PdfSource.builder()\n                                                        .data(pdfBase64)\n                                                        .build())\n                                                .build()\n                                        ),\n                                        ContentBlockParam.ofText(\n                                                TextBlockParam.builder()\n                                                        .text(\"Extract 5 key insights from this document.\")\n                                                        .build()\n                                        )\n                                ))\n                                .build())\n                        .build())\n                .build();\n\nMessageBatch batch = client.messages().batches().create(params);\n        System.out.println(batch);\n    }\n}\n```\n</CodeGroup>\n\n<CardGroup cols={2}>\n  <Card\n    title=\"Try PDF examples\"\n    icon=\"file\"\n    href=\"https://platform.claude.com/cookbook/multimodal-getting-started-with-vision\"\n  >\n    Explore practical examples of PDF processing in our cookbook recipe.\n  </Card>\n\n<Card\n    title=\"View API reference\"\n    icon=\"code\"\n    href=\"/docs/en/api/messages\"\n  >\n    See complete API documentation for PDF support.\n  </Card>\n</CardGroup>",
  "code_samples": [
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    }
  ],
  "headings": [
    {
      "level": "h2",
      "text": "Next steps",
      "id": "next-steps"
    }
  ],
  "url": "llms-txt#then-make-the-api-call-using-the-json-file",
  "links": []
}