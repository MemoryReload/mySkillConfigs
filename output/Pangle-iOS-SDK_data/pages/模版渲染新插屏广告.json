{
  "url": "https://www.csjplatform.com/supportcenter/5383",
  "title": "模版渲染新插屏广告",
  "content": "开发测试/iOS集成文档/模版渲染新插屏广告\n模版渲染新插屏广告\n最近更新 2025-10-11 16:16:43\n简介\n\n模版渲染新插屏广告开发者可以选择广告铺开大小：分为全屏和插屏，全屏和插屏场景下开发者都可以选择投放的广告类型，分别为图片+视频、仅视频、仅图片。\n\n权限\n\n模板渲染新插屏广告： 默认开放\n\nSDK版本要求\n\n双端3550及以上版本SDK\n\n创建参数说明\n使用说明\n\n模版渲染新插屏使用BUNativeExpressFullscreenVideoAd对象调用loadAdData请求广告，使用BUNativeExpressFullscreenVideoAd对象调用showAdFromRootViewController:展示广告，通过设置BUNativeExpressFullscreenVideoAdDelegate代理，获取广告、展示、点击、关闭等回调。\n\n创建广告位对象、请求广告\n\nBUNativeExpressFullscreenVideoAd\n\n请求广告时需要传入广告位对象，广告位对象创建时必须传入广告位id\n\n字段定义\n\n\t\n\n是否必传\n\n\t\n\n字段名称\n\n\t\n\n字段类型\n\n\t\n\n备注\n\n\n\n\nSlotID\n\n\t\n\n是\n\n\t\n\n广告位\n\n\t\n\nNSString\n\n\t\n\n代码位ID\n\n使用BUNativeExpressFullscreenVideoAd创建对象，使用BUNativeExpressFullscreenVideoAd调用loadAdData请求广告\n\n复制\n//保证每次请求的广告对象为新的广告对象，避免重复使用广告同一个对象进行广告请求\nself.fullscreenAd = [[BUNativeExpressFullscreenVideoAd alloc] initWithSlotID:slotID];\nself.fullscreenAd.delegate = self;\n[self.fullscreenAd loadAdData];\n展示广告\n\n调用showAdFromRootViewController:方法展示新模板插屏广告，此处需要传入当前展示的页面。一定要设置rootViewController，即展示广告和跳转落地页需要的viewController，此处建议开发者在收到nativeExpressFullscreenVideoAdDidDownLoadVideo回调后再去展示广告，可保证播放和展示效果。\n\n复制\n//show的时候会进行WKWebview的渲染，建议一次最多展示三个广告，如果超过3个会很大概率导致WKWebview渲染失败。当然一般情况下全屏视频一次只会show一个\nif (self.fullscreenAd) {\n   [self.fullscreenAd showAdFromRootViewController:self];\n}\n展示时机\n\n在收到nativeExpressFullscreenVideoAdDidDownLoadVideo回调后再去展示广告，可保证播放和展示效果。\n\n复制\n- (void)nativeExpressFullscreenVideoAdDidDownLoadVideo:(BUNativeExpressFullscreenVideoAd *)fullscreenVideoAd {\n//回调后再去展示广告，可保证播放和展示效果\n}\n广告展示后重新加载广告\n\n同一次请求的广告最多只能计一次展示，重复的展示会被系统过滤。 因此建议开发者在用户观看完广告后在nativeExpressFullscreenVideoAdDidClose回调里将原来的广告对象置为nil 保证广告对象为新的请求对象\n\n复制\n- (void)nativeExpressFullscreenVideoAdDidClose:(BUNativeExpressFullscreenVideoAd *)fullscreenVideoAd {\n//在此回调方法中可进行广告的置空操作\n}\n接收广告加载结果\n\n回调方法\n\n\t\n\n注释\n\n\n\n\nnativeExpressFullscreenVideoAd:didFailWithError\n\n\t\n\n返回的错误码(error)表示广告加载失败的原因，所有错误码详情请见链接。Link\n\n\n\n\nnativeExpressFullscreenVideoAdViewRenderFail:error\n\n\t\n\n渲染失败，网络原因或者硬件原因导致渲染失败,可以更换手机或者网络环境测试。建议升级到穿山甲最新版本SDK\n\n\n\n\nnativeExpressFullscreenVideoAdDidLoad\n\n\t\n\n广告物料加载成功\n\n\n\n\nnativeExpressFullscreenVideoAdDidDownLoadVideo\n\n\t\n\n视频/图片下载完成，建议开发者在此回调后进行广告的展示\n\nBUNativeExpressFullscreenVideoAdDelegate回调说明\n\n回调方法\n\n\t\n\n注释\n\n\n\n\nnativeExpressFullscreenVideoAdDidLoad:\n\n\t\n\n此回调进入证明广告物料已成功加载\n\n\n\n\nnativeExpressFullscreenVideoAd: didFailWithError:\n\n\t\n\n此回调方法中可定位具体的失败原因对应的错误码，打印error即可。所有错误码详情请见链接。Link\n\n\n\n\nnativeExpressFullscreenVideoAdViewRenderSuccess:\n\n\t\n\n渲染成功回调方法\n\n\n\n\nnativeExpressFullscreenVideoAdViewRenderFail:error:\n\n\t\n\n进入了此回调证明触发了渲染失败条件，可更换手机或者网络环境测试。建议直接升级到穿山甲平台最新版本\n\n\n\n\nnativeExpressFullscreenVideoAdDidDownLoadVideo:\n\n\t\n\n在此回调方法中进行广告的展示，可保证播放流畅和展示流畅，用户体验更好。\n\n\n\n\nnativeExpressFullscreenVideoAdWillVisible:\n\n\t\n\n新模版插屏广告即将展示回调\n\n\n\n\nnativeExpressFullscreenVideoAdDidVisible:\n\n\t\n\n新模版插屏广告已经展示回调\n\n\n\n\nnativeExpressFullscreenVideoAdDidClick:\n\n\t\n\n点击回调\n\n\n\n\nnativeExpressFullscreenVideoAdDidClickSkip:\n\n\t\n\n点击跳过会触发此回调，如果需要在用户点击跳过时做相关的逻辑处理，可在此回调中进行处理\n\n\n\n\nnativeExpressFullscreenVideoAdWillClose:\n\n\t\n\n此回调方法可知用户进行了广告关闭操作，可在此回调方法中进行用户关闭广告时的相应的逻辑处理\n\n\n\n\nnativeExpressFullscreenVideoAdDidClose:\n\n\t\n\n点击关闭按钮会触发此回调\n\n\n\n\nnativeExpressFullscreenVideoAdDidPlayFinish:\n\n\t\n\n广告播放完成会触发此回调\n\n\n\n\nnativeExpressFullscreenVideoAdCallback:withType:\n\n\t\n\n此回调可知新模版插屏的广告类型\n\n\n\n\nnativeExpressFullscreenVideoAdDidCloseOtherController: interactionType:\n\n\t\n\n此回调在广告跳转到其他控制器时，该控制器被关闭时调用interactionType：此参数可区分是打开的appstore/网页/视频广告详情页面\n\n通过设置BUNativeExpressFullscreenVideoAdDelegate代理，获取广告、展示、点击、关闭等回调。其他代理方法可参见demo中BUDExpressFullScreenVideoViewController类#pragma mark - BUFullscreenVideoAdDelegate部分\n\n注意事项\n\n①必须要设置rootViewController，用来处理广告跳转。SDK里所有的跳转均采用present的方式，请确保传入的rootViewController不能为空且没有present其他的控制器，否则会出现presentedViewController已经存在而导致present失败。\n\n②nativeExpressFullscreenVideoAdViewRenderSuccess渲染成功回调在广告展示后返回\n\n③为保证播放流畅和展示流畅，用户体验更好，在收到nativeExpressFullscreenVideoAdDidDownLoadVideo回调后进行广告的展示\n\n④判断广告是否有效直接使用self.fullscreenAd判断即可\n\n⑤个性化模板广告为了优化展示速度,会使用本地模板,请求时会拦截相关数据.如果接入方正在使用H5的页面发送请求,会造成请求body清空,其他逻辑不变.如果使用body传参请更换其他方式.例如:jsBridge方式。\n\n⑥每次请求数据时，都需要重新初始化一个新的BUNativeExpressFullscreenVideoAd对象。请勿重复使用本地缓存的全屏视频对象多次展示.\n\n资源\n\n详细接入可参照Demo中的BUDExpressFullScreenVideoViewController类，广告加载请求部分可参照loadFullscreenVideoAdWithSlotID方法，广告展示部分可参照showFullscreenVideoAd方法\n\n\n\n\n\n\n\n本篇目录\n简介\n权限\nSDK版本要求\n创建参数说明\n使用说明\n创建广告位对象、请求广告\n展示广告\n展示时机\n广告展示后重新加载广告\n接收广告加载结果\n注意事项\n资源\n评价此篇文档\n有帮助\n无帮助"
}