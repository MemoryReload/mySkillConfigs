{
  "url": "https://www.csjplatform.com/supportcenter/5377",
  "title": "Xcode配置",
  "content": "开发测试/iOS集成文档/Xcode配置\nXcode配置\n最近更新 2025-12-19 10:09:21\n运行环境配置\n支持系统：69以下版本支持iOS 11.0及以上、70以上版本支持iOS 13.0及以上\nSDK编译环境 Xcode 14.1及以上;\n支持架构： arm64,x86_64\n添加权限\n工程plist文件设置，点击右边的information Property List后边的 \"+\" 展开添加 App Transport Security Settings，先点击左侧展开箭头，再点右侧加号，Allow Arbitrary Loads 选项自动加入，修改值为 YES。 SDK API 已经全部支持HTTPS，但是客户素材存在非HTTPS情况。\n复制\n<key>NSAppTransportSecurity</key>\n    <dict>\n         <key>NSAllowsArbitraryLoads</key>\n         <true/>\n    </dict>\n工程plist文件设置，点击右边的information Property List后边的 \"+\" 展开添加NSMotionUsageDescription，先点击左侧展开箭头，再点右侧加号，NSMotionUsageDescription添加后，设置value值。\n注意：CSJ SDK实际并不需要配置NSMotionUsageDescription权限。\nThis key is required if your app uses APIs that access the device’s motion data, including CMSensorRecorder, CMPedometer, CMMotionActivityManager, and CMMovementDisorderManager. If you don’t include this key, your app will crash when it attempts to access motion data.详见\n复制\n<key>NSMotionUsageDescription</key>\n<string>This app needs to be able to access your motion use</string>\n\n\n\n\n具体操作如图\n\nBuild Settings中Other Linker Flags 增加参数-ObjC、 -l\"c++\"、 -l\"c++abi\" 、-l\"sqlite3\"、-l\"z\" ，SDK同时支持-all_load，具体操作如图\n\n添加依赖库\n\n工程需要在TARGETS -> Build Phases中找到Link Binary With Libraries，点击“+”，依次添加下列依赖库\n\nCoreML.framework （6.3.0.0及以上版本新增）\nCoreHaptics.framework（6.9.0.0及以上版本新增）\nAccelerate.framework\nAdSupport.framework\nAppTrackingTransparency\nAudioToolbox.framework\nAVFoundation.framework\nCoreGraphics.framework\nCoreImage.framework\nCoreLocation.framework\nCoreMedia.framework\nCoreMotion.framework\nCoreTelephony.framework\nCoreText.framework\nImageIO.framework\nJavaScriptCore.framework\nMapKit.framework\nMediaPlayer.framework\nMobileCoreServices.framework\nQuartzCore.framework\nSecurity.framework\nStoreKit.framework\nSystemConfiguration.framework\nUIKit.framework\nWebKit.framework\nDeviceCheck.framework依赖（4.8.0.3及以上版本新增）\nlibbz2.tbd\nlibc++.tbd\nlibiconv.tbd\nlibresolv.9.tbd\nlibsqlite3.tbd\nlibxml2.tbd\nlibz.tbd\nlibc++abi.tbd\n\n具体操作如图所示\n\niOS17隐私策略适配说明\n适配说明\n在6012及以上的版本，我们已新增 PrivacyInfo.xcprivacy 文件，位于静态库产物的CSJAdSDK.bundle中。\n您可以用cocoapods集成，手动集成或SPM集成，无论使用哪种方式，都可以在xcode项目的CSJAdSDK.bundle->PrivacyInfo.xcprivacy找到，请注意将PrivacyInfo.xcprivacy 拷贝进您的代码工程里。\n如果您的App本身包含PrivacyInfo.xcprivacy文件，请将穿山甲的PrivacyInfo.xcprivacy中的条款补全到自身的PrivacyInfo.xcprivacy中，具体补全方式如下：\n使用source code方式添加：\nXcode 中使用 Source Code方式打开 app 项目下的 PrivacyInfo.xcprivacy。复制穿山甲的 PrivacyInfo.xcprivacy中的条目，注意不要重复添加或错行。\n使用 Property List 的方式添加：\n在 Xcode 中双击打开 PrivacyInfo.xcprivacy 文件，在其中点击+，Xcode会提示可选的条款和可设置项，按照需求进行增补即可。\n如果您的项目同时集成了多个包含PrivacyInfo.xcprivacy的SDK，建议您将所有SDK的条款补充到您自身App的PrivacyInfo.xcprivacy中。在补充时，对于同一个API的声明和原因解释，无需重复添加。\nAds-CN的PrivacyInfo.xcprivacy\n复制\n<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\n<!DOCTYPE plist PUBLIC \\\"-//Apple//DTD PLIST 1.0//EN\\\" \\\"http://www.apple.com/DTDs/PropertyList-1.0.dtd\\\">\n<plist version=\\\"1.0\\\"> \n<dict>\n        <key>NSPrivacyCollectedDataTypes</key>\n        <array/>\n        <key>NSPrivacyAccessedAPITypes</key>\n        <array>\n                <dict>\n                        <key>NSPrivacyAccessedAPIType</key>\n                        <string>NSPrivacyAccessedAPICategoryFileTimestamp</string>\n                        <key>NSPrivacyAccessedAPITypeReasons</key>\n                        <array>\n                                <string>C617.1</string>\n                        </array>\n                </dict>\n                <dict>\n                        <key>NSPrivacyAccessedAPIType</key>\n                        <string>NSPrivacyAccessedAPICategorySystemBootTime</string>\n                        <key>NSPrivacyAccessedAPITypeReasons</key>\n                        <array>\n                                <string>35F9.1</string>\n                        </array>\n                </dict>\n                <dict>\n                        <key>NSPrivacyAccessedAPIType</key>\n                        <string>NSPrivacyAccessedAPICategoryDiskSpace</string>\n                        <key>NSPrivacyAccessedAPITypeReasons</key>\n                        <array>\n                                <string>7D9E.1</string>\n                                <string>E174.1</string>\n                        </array>\n                </dict>\n                <dict>\n                        <key>NSPrivacyAccessedAPIType</key>\n                        <string>NSPrivacyAccessedAPICategoryUserDefaults</string>\n                        <key>NSPrivacyAccessedAPITypeReasons</key>\n                        <array>\n                                <string>CA92.1</string>\n                        </array>\n                </dict>\n        </array>\n</dict>\n</plist>\niOS14 AppTrackingTransparency\nSKAdNetwork（SKAN） 是 Apple 的归因解决方案，可帮助客户在保持用户隐私的同时衡量变现活动。 使用 Apple 的 SKAdNetwork 后，即使 IDFA 不可用，流量网络也可以正确获得应用安装的归因结果。 访问 https://developer.apple.com/documentation/storekit/skadnetwork 了解更多信息。 为了流量转化的归因，所有开发者须设置SKAdNetwork方案的穿山甲SKAdNetwork id。\nApp Tracking Transparency (ATT) 适用于请求用户授权，访问与应用相关的数据以跟踪用户或设备。 访问 https://developer.apple.com/documentation/apptrackingtransparency了解更多信息。 目前苹果要求在iOS 14.5及以上的版本中必须在弹窗取得用户同意后，才可以追踪用户。对其他版本暂无明确要求，开发者应根据需要配置弹窗 。\nChecklist\n\n1 升级穿山甲 iOS SDK 3.5.1.1 及以上版本，穿山甲提供了 iOS 14.5 与 SKAdNetwork 支持\n\n2 将穿山甲的 SKAdNetwork ID 添加到 info.plist 中，以保证 SKAdNetwork 的正确运行\n\n复制\n<key>SKAdNetworkItems</key>\n <array>\n  <dict>\n   <key>SKAdNetworkIdentifier</key>\n   // SKAdNetwork方案的穿山甲SKAdNetwork id\n   <string>238da6jt44.skadnetwork</string>\n  </dict>\n  <dict>\n   <key>SKAdNetworkIdentifier</key>\n   // SKAdNetwork方案的穿山甲SKAdNetwork id\n   <string>x2jnk7ly8j.skadnetwork</string>\n  </dict>\n  <dict>\n   <key>SKAdNetworkIdentifier</key>\n   // SKAdNetwork方案的穿山甲SKAdNetwork id\n   <string>22mmun2rn5.skadnetwork</string>\n  </dict>\n </array>\n\n3 支持苹果 ATT：从 iOS 14.5 开始，若开发者设置 App Tracking Transparency 向用户申请跟踪授权，在用户授权之前IDFA 将不可用。 如果用户拒绝此请求，应用获取到的 IDFA 将自动清零，可能会导致您的变现收入的降低\n\n要获取 App Tracking Transparency 权限，请更新您的 Info.plist，添加 NSUserTrackingUsageDescription 字段和自定义文案描述。代码示例：\n复制\n<key>NSUserTrackingUsageDescription</key>\n<string>该标识符将用于向您投放个性化样式</string>\n向用户申请权限时，请调用 requestTrackingAuthorizationWithCompletionHandler:方法。我们建议您申请权限后再请求，以便穿山甲准确的获得用户授权状态。\n\nSwift 代码示例\n\n复制\nimport AppTrackingTransparency\nimport AdSupport\nfunc requestIDFA() {\n ATTrackingManager.requestTrackingAuthorization(completionHandler: { status in\n  // Tracking authorization completed. Start loading ads here.\n  // loadAd()\n  })\n}\n\nObjective-C 代码示例\n\n复制\n#import <AppTrackingTransparency/AppTrackingTransparency.h>\n#import <AdSupport/AdSupport.h>\n- (void)requestIDFA {\n  [ATTrackingManager requestTrackingAuthorizationWithCompletionHandler:^(ATTrackingManagerAuthorizationStatus status) {\n   // Tracking authorization completed. Start loading ads here.\n   // [self loadAd];\n  }];\n}\niOS本地化/国际化配置\n\n注意 : 开发者必须在这里设置所支持的语言,否则会有语言显示的问题.\n\n例如 : 支持中文 添加 Chinese\n\n\n\n\n\n\n\n本篇目录\n运行环境配置\n添加权限\niOS17隐私策略适配说明\n适配说明\nAds-CN的PrivacyInfo.xcprivacy\niOS14 AppTrackingTransparency\nChecklist\niOS本地化/国际化配置\n评价此篇文档\n有帮助\n无帮助"
}