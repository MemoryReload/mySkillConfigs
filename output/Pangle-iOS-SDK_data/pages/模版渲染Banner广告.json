{
  "url": "https://www.csjplatform.com/supportcenter/5386",
  "title": "模版渲染Banner广告",
  "content": "开发测试/iOS集成文档/模版渲染Banner广告\n模版渲染Banner广告\n最近更新 2025-10-11 16:16:49\n简介\n\n在内容底部或顶部显示的小条形广告。不应将Banner广告放置于文本、图片和应用的其他可点击部分，避免误点。\n\n支持的广告尺寸：支持600*300、600*400、600*500、600*260、600*90、600*150、640*100、690*388共8个尺寸，开发者按照展示场景进行勾选。创建好的尺寸不支持修改。\n\n权限\n\n模板Banner广告： 默认提供\n\n轮播设置\n\n①当是否轮播：是 选择轮播功能时，客户端不需要自行实现间隔一定时间重新请求的操作，轮播功能由SDK内部实现，客户端只要保证广告及时得到展示即可，另轮播间隔为30s～120s之间。\n\n②当是否轮播：否 不选择轮播功能时，客户端可自行实现轮播效果，如间隔一定的时间重新请求广告，保证一定间隔时间内广告内容为新的内容，此时的广告请求间隔建议和平台实现的轮播功能间隔保持一致，请求时间间隔为30s～120s之间。\n\n使用说明\n\n模版banner使用BUNativeExpressBannerView对象调用loadAdData请求广告，使用addSubview添加广告对象来进行广告的展示，通过设置BUNativeExpressBannerViewDelegate代理，获取广告、展示、点击、关闭等回调。\n\n创建广告位对象、请求广告\n\nBUNativeExpressBannerView\n\n请求广告时需要传入广告位对象，广告位对象创建时必须传入广告位ID\n\n字段定义\n\n\t\n\n是否必传\n\n\t\n\n字段名称\n\n\t\n\n字段类型\n\n\t\n\n备注\n\n\n\n\nslotID\n\n\t\n\n是\n\n\t\n\n代码位\n\n\t\n\nNSString\n\n\t\n\n代码位ID\n\n\n\n\nadSize\n\n\t\n\n是\n\n\t\n\n广告尺寸\n\n\t\n\nCGSize\n\n\t\n\n广告尺寸，设置的尺寸务必和媒体平台配置保持相同比例\n\n使用BUNativeExpressBannerView创建对象，使用BUNativeExpressBannerView调用loadAdData请求广告。\n\n复制\n//保证每次请求的广告对象为新的广告对象，避免重复使用广告同一个对象进行广告请求\nUIWindow *window = nil;\n    if ([[UIApplication sharedApplication].delegate respondsToSelector:@selector(window)]) {\n        window = [[UIApplication sharedApplication].delegate window];\n   }\n    if (![window isKindOfClass:[UIView class]]) {\n        window = [UIApplication sharedApplication].keyWindow;\n   }\n    if (!window) {\n        window = [[UIApplication sharedApplication].windows objectAtIndex:0];\n   }\n    CGFloat bottom = 0.0;\n    if (@available(iOS 11.0, *)) {\n        bottom = window.safeAreaInsets.bottom;\n   } else {\n        // Fallback on earlier versions\n   }\n    \n    NSValue *sizeValue = [self.sizeDcit objectForKey:slotID];\n    CGSize size = [sizeValue CGSizeValue];\nself.bannerView = [[BUNativeExpressBannerView alloc] initWithSlotID:slotID rootViewController:self adSize:CGSizeMake(screenWidth, bannerHeigh)];\nself.bannerView.frame = CGRectMake(0, self.view.height-bannerHeigh, screenWidth, bannerHeigh);\nself.bannerView.delegate = self;\n[self.bannerView loadAdData];\n\n\n字段定义\n\n\t\n\n是否必传\n\n\t\n\n字段名称\n\n\t\n\n字段类型\n\n\t\n\n备注\n\n\n\n\ninterval\n\n\t\n\n是\n\n\t\n\n轮播间隔\n\n\t\n\nNSInteger\n\n\t\n\n轮播间隔时间为30s～120s之间\n\n备注：当媒体平台选择轮播功能时需要设置此参数，时间间隔为30s～120s之间。\n\n复制\nUIWindow *window = nil;\n    if ([[UIApplication sharedApplication].delegate respondsToSelector:@selector(window)]) {\n        window = [[UIApplication sharedApplication].delegate window];\n   }\n    if (![window isKindOfClass:[UIView class]]) {\n        window = [UIApplication sharedApplication].keyWindow;\n   }\n    if (!window) {\n        window = [[UIApplication sharedApplication].windows objectAtIndex:0];\n   }\n    CGFloat bottom = 0.0;\n    if (@available(iOS 11.0, *)) {\n        bottom = window.safeAreaInsets.bottom;\n   } else {\n        // Fallback on earlier versions\n   }\n    \n    NSValue *sizeValue = [self.sizeDcit objectForKey:slotID];\n    CGSize size = [sizeValue CGSizeValue];\n// important: 升级的用户请注意，初始化方法去掉了imgSize参数\n    self.bannerView = [[BUNativeExpressBannerView alloc] initWithSlotID:realSlotId rootViewController:self adSize:size interval:30];\n    self.bannerView.frame = CGRectMake((self.view.width-size.width)/2.0, self.view.height-size.height-bottom, size.width, size.height);\n  self.bannerView.delegate = self;\n  [self.bannerView loadAdData];\n展示广告\n\n使用addSubview添加广告对象来进行广告的展示，此处建议开发者在收到nativeExpressBannerAdViewRenderSuccess回调后展示Banner广告，可保证播放流畅和展示流畅，用户体验更好。\n\n复制\n- (void)showBanner {\n   [self.view addSubview:self.bannerView];\n}\n展示时机\n\n在收到nativeExpressBannerAdViewRenderSuccess回调后再进行广告的展示，可保证播放流畅和展示流畅，用户体验更好。\n\n复制\n- (void)nativeExpressBannerAdViewRenderSuccess:(BUNativeExpressBannerView *)bannerAdView {\n //在此回调方法中进行广告的展示，可保证播放流畅和展示流畅，用户体验更好。\n}\n接收广告加载结果\n\n回调方法\n\n\t\n\n注释\n\n\n\n\nnativeExpressBannerAdView:didLoadFailWithError\n\n\t\n\n返回的错误码(error)表示广告加载失败的原因，所有错误码详情请见链接。Link\n\n\n\n\nnativeExpressBannerAdViewRenderFail\n\n\t\n\n渲染失败，网络原因或者硬件原因导致渲染失败,可以更换手机或者网络环境测试。建议升级到穿山甲平台最新版本\n\n\n\n\nnativeExpressBannerAdViewDidLoad\n\n\t\n\n广告加载成功回调\n\n\n\n\nnativeExpressBannerAdViewRenderSuccess\n\n\t\n\n渲染成功回调\n\nBUNativeExpressBannerViewDelegate回调说明\n\n回调方法\n\n\t\n\n注释\n\n\n\n\nnativeExpressBannerAdViewDidLoad:bannerAdView\n\n\t\n\n加载成功回调\n\n\n\n\nnativeExpressBannerAdView: didLoadFailWithError:\n\n\t\n\n返回的错误码(error)表示广告加载失败的原因，所有错误码详情请见链接。Link\n\n\n\n\nnativeExpressBannerAdViewRenderSuccess:\n\n\t\n\n渲染成功回调\n\n\n\n\nnativeExpressBannerAdViewRenderFail:error:\n\n\t\n\n渲染失败，网络原因或者硬件原因导致渲染失败,可以更换手机或者网络环境测试。建议升级到穿山甲平台最新版本\n\n\n\n\nnativeExpressBannerAdViewWillBecomVisible:\n\n\t\n\n当显示新的广告时调用此方法\n\n\n\n\nnativeExpressBannerAdViewDidClick:\n\n\t\n\n点击回调\n\n\n\n\nnativeExpressBannerAdView:dislikeWithReason:\n\n\t\n\ndislike回调方法，需要在此回调方法中进行广告的移除操作，并将广告对象置为nil，如若不实现此回调方法，关闭按钮将不会生效\n\n\n\n\nnativeExpressBannerAdViewDidCloseOtherController: interactionType:\n\n\t\n\n此回调在广告跳转到其他控制器时，该控制器被关闭时调用interactionType：此参数可区分是打开的appstore/网页/详情页面等等\n\n通过设置BUNativeExpressBannerViewDelegate代理，获取广告、展示、点击、关闭等回调。其他代理方法可参见Demo中BUDExpressBannerViewController类#pragma ---BUNativeExpressBannerViewDelegate部分\n\ndislike回调说明\n复制\n- (void)nativeExpressAdView:(BUNativeExpressAdView *)nativeExpressAdView dislikeWithReason:(NSArray<BUDislikeWords *> *)filterWords {\n    //【重要】需要在点击叉以后 在这个回调中移除视图，否则，会出现用户点击叉无效的情况\n   [self.expressAdViews removeObject:nativeExpressAdView];\n    NSUInteger index = [self.expressAdViews indexOfObject:nativeExpressAdView];\n    NSIndexPath *indexPath=[NSIndexPath indexPathForRow:index inSection:0];\n   [self.tableView reloadRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade]; \n}\n\n- (void)nativeExpressBannerAdViewDidRemoved:(BUNativeExpressBannerView *)nativeExpressAdView {\n//【重要】若开发者收到此回调，代表穿山甲会主动关闭掉广告，广告移除后需要开发者对界面进行适配\n  [UIView animateWithDuration:0.25 animations:^{\n   nativeExpressAdView.alpha = 0;\n  } completion:^(BOOL finished) {\n   [nativeExpressAdView removeFromSuperview];\n    self.bannerView = nil;\n  }];\n self.selectedView.promptStatus = BUDPromptStatusDefault;\n}\n\n\nBUMaterialMeta.h\n\n广告推荐说明dislike功能下 “为什么看到此广告”模块，相关API5.1.0.0及后续版本会完全下掉\n\n复制\n/// compliance statement of personalized advertising push\n@property (nonatomic, strong) BUPersonalizationPrompts *personalPrompts DEPRECATED_MSG_ATTRIBUTE(\"The 'personalPrompts' api will not work and will be removed in the future.\");\n\nBUAdSlot.h\n\nisOriginAd 只有banner广告需要设置YES（5.1.0.0及以上版本）\n\n复制\n/// Banner ads are set to YES, other ad types are 0, the default is NO.\n@property (nonatomic, assign) BOOL isOriginAd DEPRECATED_MSG_ATTRIBUTE(\"The 'isOriginAd's is only valid for Banner Ads, no longer required in version 5.1.0.0 and later.\");\n注意事项\n\n①避免出现先展示广告后请求数据的情况，Banner广告的展示是通过使用addSubview添加广告对象来进行广告展示\n\n②自行实现轮播功能时，建议和平台轮播间隔保持一致，请求间隔为30s～120s之间，避免广告请求过于频繁的情景，轮播间隔为30s～120s之间\n\n③媒体平台选择轮播功能时，客户端进行广告的请求和展示操作即可，后续均由SDK内部实现\n\n④目前banner广告已支持内容底部或顶部居中显示，开发者可自行调整左右边距。\n\n资源\n\n详细接入可参照Demo中的BUDExpressBannerViewController类，广告加载请求部分可参照loadBannerWithSlotID方法，广告展示部分可参照showBanner方法\n\n\n\n\n\n\n\n本篇目录\n简介\n权限\n轮播设置\n使用说明\n创建广告位对象、请求广告\n展示广告\n展示时机\n接收广告加载结果\ndislike回调说明\n注意事项\n资源\n评价此篇文档\n有帮助\n无帮助"
}