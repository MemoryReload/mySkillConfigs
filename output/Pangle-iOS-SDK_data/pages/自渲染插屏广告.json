{
  "url": "https://www.csjplatform.com/supportcenter/5393",
  "title": "自渲染插屏广告",
  "content": "开发测试/iOS集成文档/历史功能/自渲染插屏广告\n自渲染插屏广告\n最近更新 2023-02-16 14:43:44\n简介\n\n自渲染插屏：使用场景为应用功能自然体验中断时，例如暂停视频播放，游戏关卡之间。插屏广告不应突然出现，不应干扰用户使用应用的正常流程，例如应用加载，退出应用或者游戏过程中。\n\n支持的广告尺寸：\n\n大图(宽高比：1.78的图片)\n小图(宽高比：1.52的图片)\n组图(三张宽高比：1.52的图片)\n权限\n\n自渲染插屏：已回收,不再提供创建（该部分面向历史有使用该广告类型的开发者）\n\n使用说明\n\n自渲染插屏广告使用BUNativeAd对象调用loadAdData请求广告，通过设置BUNativeAdDelegate代理，获取广告相关素材、以及点击等回调。\n\nBUNativeAd\n\n请求广告时需要传入广告位对象，广告位对象创建时必须传入广告位ID及广告基本配置BUAdSlot、BUSize\n\n字段定义\n\n\t\n\n是否必传\n\n\t\n\n字段名称\n\n\t\n\n字段类型\n\n\t\n\n备注\n\n\n\n\nBUAdSlot\n\n\t\n\n是\n\n\t\n\n/\n\n\t\n\n/\n\n\t\n\n基本配置\n\n\n\n\nBUSize\n\n\t\n\n是\n\n\t\n\n/\n\n\t\n\n/\n\n\t\n\n请求广告图片的尺寸\n\n\n\n\nslotID\n\n\t\n\n是\n\n\t\n\n代码位\n\n\t\n\nNSString\n\n\t\n\n代码位ID\n\n使用BUAdSlot、BUSize创建广告基本信息，使用BUNativeAd调用loadAdData请求广告\n\n复制\n BUSize *imgSize1 = [[BUSize alloc] init];\n imgSize1.width = 1080;\n imgSize1.height = 1920;\n BUAdSlot *slot1 = [[BUAdSlot alloc] init];\n slot1.ID = self.viewModel.slotID;\n slot1.AdType = BUAdSlotAdTypeInterstitial;\n slot1.position = BUAdSlotPositionTop;\n slot1.imgSize = imgSize1;\n slot1.isOriginAd = YES;\n BUNativeAd *nad = [[BUNativeAd alloc] initWithSlot:slot1];\n nad.rootViewController = self;\n nad.delegate = self;\n self.nativeAd = nad;\n [nad loadAdData];\n接收广告加载结果\n\n回调方法\n\n\t\n\n注释\n\n\n\n\nnativeAd: didFailWithError:\n\n\t\n\n返回的错误码(error)表示广告加载失败的原因，所有错误码详情请见链接。Link\n\n\n\n\nnativeAdDidLoad:\n\n\t\n\n广告加载成功回调 建议在此回调方法中进行数据的插入处理\n\nBUNativeAdDelegate回调说明\n\n回调方法\n\n\t\n\n注释\n\n\n\n\nnativeAdDidLoad:\n\n\t\n\n广告物料加载成功回调\n\n\n\n\nnativeAd: didFailWithError:\n\n\t\n\n返回的错误码(error)表示广告加载失败的原因，所有错误码详情请见链接。Link\n\n\n\n\nnativeAdDidBecomeVisible:\n\n\t\n\n广告显示回调\n\n\n\n\nnativeAdDidCloseOtherController: interactionType:\n\n\t\n\n此回调在广告跳转到其他控制器时，该控制器被关闭时调用interactionType：此参数可区分是打开的appstore/网页/视频广告详情页面\n\n\n\n\nnativeAdDidClick:withView:\n\n\t\n\n点击回调方法\n\n\n\n\nnativeAd: dislikeWithReason:\n\n\t\n\ndislike按钮点击回调，需要在此回调方法中进行响应的数据处理\n\n通过设置BUNativeAdDelegate代理，获取广告关闭等回调。其他代理方法可参见Demo中BUDNativeInterstitialViewController类\n\n广告获取数据赋值时机\n复制\n- (void)nativeAdDidLoad:(BUNativeAd *)nativeAd {\n    if (!nativeAd.data) { return; }\n    if (nativeAd.data.imageAry.count) {\n        self.titleLable.text = nativeAd.data.AdTitle;\n        \n        BUImage *adImage = nativeAd.data.imageAry.firstObject;\n        CGFloat contentWidth = CGRectGetWidth(self.view.bounds) - 2*leftEdge - 2*5;\n        CGFloat imageViewHeight = contentWidth * adImage.height/ adImage.width;\n        self.interstitialAdView.frame = CGRectMake(5, titleHeight, contentWidth, imageViewHeight);\n        [self layoutViewsWithimageViewHeight:imageViewHeight];\n        \n        if (adImage.imageURL.length) {\n            [self.interstitialAdView setImageWithURL:[NSURL URLWithString:adImage.imageURL] placeholderImage:nil];\n        }\n        \n        self.describeLable.frame = CGRectMake(13, self.interstitialAdView.bottom + 5, self.describeLable.width, self.describeLable.height);\n        self.describeLable.text = nativeAd.data.AdDescription;\n        \n        self.dowloadButton.frame = CGRectMake((self.whiteBackgroundView.width - self.dowloadButton.width)/2, self.describeLable.bottom + 5, self.dowloadButton.width, self.dowloadButton.height);\n        [self.dowloadButton setTitle:nativeAd.data.buttonText forState:UIControlStateNormal];\n        \n        [self.nativeAd registerContainer:self.whiteBackgroundView    withClickableViews:@[self.titleLable,self.interstitialAdView,self.describeLable,self.dowloadButton]];\n        [self.relatedView refreshData:nativeAd];\n        \n        [self addAccessibilityIdentifier];\n    }\n}\n\n\n\n\n注意事项\n\n1、在物料加载成功方法里获取相关广告信息赋值后，需调用registerContainer:withClickableViews:clickableViews注册绑定点击的View并刷新数据源refreshData:。\n\n2、每次获取物料信息后需要刷新调用refreshData:方法\n\n\n\n\n\n\n\n本篇目录\n简介\n权限\n使用说明\n接收广告加载结果\n广告获取数据赋值时机\n注意事项\n评价此篇文档\n有帮助\n无帮助"
}
