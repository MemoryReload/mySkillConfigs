{
  "url": "https://www.csjplatform.com/supportcenter/28585",
  "title": "iOS直播拉流",
  "content": "开发测试/iOS集成文档/iOS直播拉流\niOS直播拉流\n最近更新 2025-08-14 20:34:01\n一、背景&收益\n\n直播拉流类型(实时的电商直播流，即实时正在播放的直播预览流，是闭环预算中的一种特殊广告素材形式)预算在整体闭环预算中占比30%，支持后预计闭环预算消耗+10%-20%。目前穿山甲已支持IOS端直播拉流能力，开发者可按照下述流程完成接入，把握预算。\n\n二、SDK接入\n\nV6610及以上：请参考本章节接入\n\nV6410-V6609：参考https://bytedance.larkoffice.com/docx/OLPIdHCubooQMOxE7lTcNNuFn8b接入\n\nCocoapods接入\n方式一：动态库接入【推荐】\n复制\n### 请根据实际场景选择其中一种方式接入\n\n# 6610+版本穿山甲默认集成直播拉流\npod 'Ads-CN', '6.8.x.x'\n \n# 使用的Gromore聚合能力\n# V6610-V70xx：在原来CSJMediation的基础上增加BUAdLive-Framework的subspec\npod 'Ads-CN', '6.8.x.x', :subspecs => ['CSJMediation','BUAdSDK','BUAdLive-Framework']\n# V7100+ ：默认接入直播拉流的配置能力\npod 'Ads-CN', '7.1.x.x', :subspecs => ['CSJMediation','BUAdSDK']\n方式二：静态库接入\n\n静态库接入会引入FFMpeg组件，确保宿主App内部不包含任何FFMpeg组件，否则可能会在编译或者运行阶段发生冲突或者崩溃。若静态库接入有ffmpeg冲突，强烈建议通过方式一：动态库进行接入。\n\n复制\n### 请根据实际场景选择其中一种方式接入\n\n# 6610+版本穿山甲默认集成直播拉流\npod 'Ads-CN', '6.8.x.x', :subspecs=> ['BUAdSDK', 'BUAdLive-Lib']\n\n# 如果使用的Gromore聚合能力\n# V7100+ ：默认接入直播拉流的配置能力\npod 'Ads-CN', '7.1.x.x', :subspecs => ['CSJMediation','BUAdSDK']\n# V6610-V70xx：在原来CSJMediation的基础上增加BUAdLive-Lib的subspec\npod 'Ads-CN', '6.8.x.x', :subspecs => ['CSJMediation','BUAdSDK','BUAdLive-Lib']\n\n\n# 如此前引入了Onekit，升级时请移除\n# pod 'OneKit', '1.4.2', :subspecs => ['BaseKit', 'Reachability', 'ByteDanceKit/Foundation'], :source => 'https://github.com/volcengine/volcengine-specs'\n手动接入\n将穿山甲平台下载的BUAdLive拖入工程\n下载TTSDK依赖包解压，将以下内容全部拖入工程。\nTTSDK.zip\nTTSDK.zip\n65.85 MB\n设置Embed&Sign\nffmpeg_dashdec.framework\nttboringssl.framework\nttcrypto.framework\nTTFFmpeg.framework\n\n           以下是完整的依赖库列表和设置方式\n\n添加系统动态库库依赖\n\n添加如下动态库\n\n复制\nCoreMotion,\nCoreMedia,\nMetalKit,\nOpenAL,\nVideoToolBox,\nAudioToolBox,\nAVFoundation,\nSystemConfiguration,\nMetalPerformanceShaders,\nCoreTelephony\n\n标准库依赖\n\n复制\nstdc++,\nz, \nxml2,\niconv,\n三、自定义版本\n若媒体项目没有接入TTSDK，直接按照第二部分默认接入方式即可，不需要自定义版本；\n若本身有依赖TTSDK或TTSDKFramework，则需要参考本模块进行接入\n\n什么情况下需要自定义版本？\n\n此前接入过穿山甲直播拉流，升级穿山甲SDK不想修改依赖关系，或者不想修改TTSDK版本。（升级仍需要删除Onekit依赖）\n项目中已经集成TTSDK / TTSDKFramework，或本身的业务依赖TTSDK（如直播功能）。\n此前集成其他SDK已经依赖的TTSDK或TTSDKFramework（如穿山甲-内容输出DJXSdk）\n需要某个特定的版本，清楚的理解TTSDK的依赖关系和版本信息。\n\n注意：项目中只能存在一个TTSDK或者TTSDKFramework，如果需要自定义接入，请仔细检查项目依赖关系。\n\n自定义动态库版本\n复制\n# 若没有TTSDK相关冲突，直接默认按pod 'Ads-CN', '6.x.x.x'接入即可\npod 'Ads-CN', '6.8.x.x', :subspecs => ['BUAdSDK', 'BUAdLive']\n\n#若使用的Gromore聚合能力\n# V7100+ ：默认接入直播拉流的配置能力\npod 'Ads-CN', '7.1.x.x', :subspecs => ['CSJMediation-Only','BUAdSDK','BUAdLive']\n# V6610-V70xx：在原来CSJMediation的基础上增加BUAdLive-Framework的subspec\npod 'Ads-CN', '6.8.x.x', :subspecs => ['CSJMediation','BUAdSDK','BUAdLive']\n\n# TTSDK动态库版本，建议使用文档中的版本\npod 'TTSDKFramework', '1.46.2.7-premium', :subspecs => ['LivePull-Lite'], :source => 'https://github.com/volcengine/volcengine-specs'\n自定义静态库版本\n\n如果您不确定是否需要，可以参考“二、SDK接入”完成接入。\n\n静态库会引入FFMpeg组件，确保宿主App内部不包含任何FFMpeg组件，否则会在编译或者运行阶段发生冲突或者崩溃。\n\n复制\n# 若没有TTSDK相关冲突，直接默认按pod 'Ads-CN', '6.8.x.x'接入即可\npod 'Ads-CN', '6.8.x.x', :subspecs => ['BUAdSDK', 'BUAdLive-Lib']\n\n# 若使用的Gromore聚合能力\n# V7100+ ：默认接入直播拉流的配置能力\npod 'Ads-CN', '7.1.x.x', :subspecs => ['CSJMediation-Only','BUAdSDK','BUAdLive-Lib']\n# V6610-V70xx：在原来CSJMediation的基础上增加BUAdLive-Lib的subspec\npod 'Ads-CN', '6.8.x.x', :subspecs => ['CSJMediation','BUAdSDK','BUAdLive-Lib']\n\n\n# TTSDK静态库版本,建议使用文档中的版本\npod 'TTSDK', '1.46.2.7-premium', :subspecs => ['LivePull-Lite'], :source => 'https://github.com/volcengine/volcengine-specs'\n四、广告样式适配\n\n直播拉流是闭环预算中的一种特殊广告素材形式，imagemode=166。①自渲染广告类型需要根据imagemode=166区分是否为直播拉流广告，若不适配该素材类型，则会缺失直播拉流预算(取主播名称/头像等字段做直播样式展示，字段获取需联系对接同学开通权限)；②模版广告类型开发者满足上述接入方式，则不需要额外处理；\n\n五、联调测试\n\n集成完成后，开发者可以集成测试工具后预览测试直播拉流类广告，有问题可即时向对接同学反馈\n\n注：使用测试工具前，需要先找穿山甲技术支持申请权限，加白后才能生效\n\n\n\n\n六、FAQ\n直播拉流支持的广告位范围？\n激励视频：模板渲染\n插全屏：模板渲染\n信息流：自渲染、模板渲染\nDraw：自渲染、模板渲染 [6133,6200) 、[6206 版本以上）\n测试看不到直播拉流广告，CheckList：\n是否正确集成了穿山甲直播拉流SDK？参考“二、SDK接入”\n若想要定向刷到直播拉流素材，请参考\\\"四、联调测试\\\"\\n如上述均完成，抓取get_ads和settings接口返回，联系TS和RD同学排查：\n运行过程报错？直播播放异常？Crash？\n检项目木是否包含ffmpeg，只要应用中包含，无论是否使用，就需要使用动态库方式集成。常见的ffmpeg库：ijkplayer、TTSDK等三方通用播放器库。\n如何区分普通广告和直播拉流广告？\n通过BUNativeAds.data.imageMode = 166区分，如自渲染等业务需求，可以据此判断从而进行UI、逻辑的定制。若媒体开通了自定义播放器的能力，请在判断imagemode为166后，针对166素材选择SDK默认播放器展示，否则直播拉流无法播放\n直播拉流广告和闭环电商广告saas链路的区别？\n直播拉流广告是闭环电商广告的一种，还有其他形式广告。但是iOS直播拉流广告不包含闭环saas环境，点击会跳转抖音而非在app内完成全链路。\n\n\n\n\n\n\n\n\n\n\n本篇目录\n一、背景&收益\n二、SDK接入\nCocoapods接入\n方式一：动态库接入【推荐】\n方式二：静态库接入\n手动接入\n三、自定义版本\n自定义动态库版本\n自定义静态库版本\n四、广告样式适配\n五、联调测试\n六、FAQ\n评价此篇文档\n有帮助\n无帮助"
}