{
  "url": "https://www.csjplatform.com/supportcenter/5385",
  "title": "模板渲染Draw广告",
  "content": "开发测试/iOS集成文档/模板渲染Draw广告\n模板渲染Draw广告\n最近更新 2025-10-11 16:16:52\n简介\n\n模板渲染Draw：场景应在应用的内容流中与应用内容穿插展示，Draw信息流广告默认全屏展示。\n\n支持的广告尺寸：竖版视频(宽高比9:16)\n\n权限\n\n模版渲染Draw视频广告： 默认提供\n\n使用说明\n\n模版Draw信息流广告使用BUNativeExpressAdManager对象调用loadAd请求广告，使用BUNativeExpressAdView对象来进行广告的渲染render，通过设置BUNativeExpressAdViewDelegate代理，获取广告、展示、点击、关闭等回调。\n\n创建广告位对象、请求广告\n\nBUNativeExpressAdManager\n\n请求广告时需要传入广告位对象，广告位对象创建时必须传入广告位ID\n\n字段定义\n\n\t\n\n是否必传\n\n\t\n\n字段名称\n\n\t\n\n字段类型\n\n\t\n\n备注\n\n\n\n\nBUAdSlot\n\n\t\n\n是\n\n\t\n\n/\n\n\t\n\n/\n\n\t\n\n基本信息配置，详见事例\n\n\n\n\nadSize\n\n\t\n\n是\n\n\t\n\n广告尺寸\n\n\t\n\nCGSize\n\n\t\n\n广告尺寸，默认全屏展示\n\n请求广告前需要配置BUAdSlot广告的基本信息，使用BUNativeExpressAdManager创建对象，使用BUNativeExpressAdManager调用loadAd请求广告\n\n复制\n//保证每次请求的广告对象为新的广告对象，避免重复使用广告同一个对象进行广告请求\nBUAdSlot *slot1 = [[BUAdSlot alloc] init];\n slot1.ID = self.viewModel.slotID;\n slot1.AdType = BUAdSlotAdTypeDrawVideo; //required\n slot1.isOriginAd = YES; //required\n slot1.position = BUAdSlotPositionTop;\n slot1.imgSize = [BUSize sizeBy:BUProposalSize_DrawFullScreen];\n  if (!self.nativeExpressAdManager) {\n       self.nativeExpressAdManager = [[BUNativeExpressAdManager alloc] initWithSlot:slot1 adSize:self.view.bounds.size];\n   }\n  self.nativeExpressAdManager.adSize = self.view.bounds.size;\n  self.nativeExpressAdManager.delegate = self;\n  [self.nativeExpressAdManager loadAdDataWithCount:count];\n\n注意：\n\n①self.nativeExpressAdManager可以重用\n\n②模版Draw信息流广告尺寸adSize默认全屏展示\n\n③模版Draw信息流广告可多条广告同时请求，最大请求数量为3\n\n展示广告\n\n由于官方Demo使用tableView进行的广告的插入展示，直接更新数据源即可更新广告的相关插入展示，此处建议开发者在收到nativeExpressAdSuccessToLoad回调后再进行广告的渲染展示，可保证播放流畅和展示流畅，用户体验更好。\n\n建议在收到nativeExpressAdSuccessToLoad回调后再进行广告的渲染展示，刷新数据源\n\n复制\n- (void)nativeExpressAdSuccessToLoad:(BUNativeExpressAdManager *)nativeExpressAd views:(NSArray<__kindof BUNativeExpressAdView *> *)views {\n    if (views.count) {\n        NSMutableArray *dataSources = [self.dataSource mutableCopy];\n       [views enumerateObjectsUsingBlock:^(id  _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) {\n           BUNativeExpressAdView *expressView = (BUNativeExpressAdView *)obj;\n           expressView.rootViewController = self;\n           // important: 此处会进行WKWebview的渲染，建议一次最多预加载三个广告，如果超过3个会很大概率导致WKWebview渲染失败。\n          [expressView render];\n           NSUInteger index = rand() % (self.dataSource.count-3)+2;\n          [dataSources insertObject:expressView atIndex:index];\n       }];\n        self.dataSource = [dataSources copy];\n   }\n   [self.tableView reloadData];\n}\n资源\n\n详细接入可参照Demo中的BUDExpressDrawViewController类，广告加载请求部分可参照loadData方法，广告展示渲染部分可参照nativeExpressAdSuccessToLoad方法\n\n\n\n\n\n\n\n本篇目录\n简介\n权限\n使用说明\n创建广告位对象、请求广告\n展示广告\n资源\n评价此篇文档\n有帮助\n无帮助"
}