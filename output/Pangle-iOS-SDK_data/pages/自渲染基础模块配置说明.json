{
  "url": "https://www.csjplatform.com/supportcenter/5388",
  "title": "自渲染基础模块配置说明",
  "content": "开发测试/iOS集成文档/自渲染基础模块配置说明\n自渲染基础模块配置说明\n最近更新 2024-02-01 19:45:14\n简介\n\n①BUNativeAd 类提供了原生广告的数据类型等各种信息，开发者在获取数据后可在属性 data(BUMaterialMeta)里面获取图片类广告的数据信息,如交互的广告类型、图片、广告logo、广告描述、标题等等。\n\n②BUNativeAd类提供了原生广告的数据绑定、点击事件的上报，开发者可自行定义信息流广告展示形态与布局。\n\n③使用BUAdSlot初始化一个BUNativeAd的对象，调用loadAdData:方法，开发者可以在拉取广告成功的回调中获取到BUMaterialMeta中的广告数据。\n\n④开发者可提前创建好需要展示广告的视图，在创建好的视图中按照自身项目需求渲染广告样式。\n\n⑤开发者可以使用registerContainer:withClickableViews:clickableViews注册绑定点击的 View，包含图片、按钮等等。备注：\n\nBUNativeAd注册view具体点击事件（跳转广告页，下载，打电话等等）行为由 SDK 控制。\n具体点击事件类型interactionType（BUInteractionType）来自BUNativeAd请求获得的数据data(BUMaterialMeta)\n\n⑥开发者想要获取视频类广告的相关数据信息，需初始化BUNativeAdRelatedView类，来获取需要添加的广告logo、dislike按钮、视频视图等等。\n\n⑦如果当前dislike样式不满足自身项目需求，可参照BUDislike类自行实现dislike按钮样式。\n\n⑧如果需要添加广告logo、dislike按钮、视频视图等，请先初始化BUNativeAdRelatedView。\n\n广告位类(BUAdSlot)\n\nBUAdSlot 对象为加载广告时需要设置的广告位描述信息，在BUNativeAd、BUNativeAdsManager、BUBannerAdView、BUInterstitialAd中均需要初始化阶段传入。在加载广告前，必须须设置好。一次请求多条广告数据请使用BUNativeAdsManager\n\nBUNativeAd 类为加载广告的接口类，可以通过数据接口每次请求一个广告数据，并能协助 UIView 注册处理各种广告点击事件，设置delegate后可获取数据。rootViewController是必传参数，是弹出落地页广告ViewController的。\n\nBUAdSlot接口说明\n\n字段定义\n\n\t\n\n字段名称\n\n\t\n\n字段类型\n\n\t\n\n备注\n\n\n\n\nID\n\n\t\n\n代码位\n\n\t\n\nNSString\n\n\t\n\n必传参数，代码位ID\n\n\n\n\nAdType\n\n\t\n\n广告类型\n\n\t\n\nBUAdSlotAdType\n\n\t\n\n必传参数；BUAdSlotAdTypeUnknown = 0, BUAdSlotAdTypeBanner = 1, // bannar广告 BUAdSlotAdTypeInterstitial = 2, // 插屏广告 BUAdSlotAdTypeSplash = 3, // 开屏广告 BUAdSlotAdTypeSplash_Cache = 4, // 缓存的开屏广告 BUAdSlotAdTypeFeed = 5, // 信息流广告 BUAdSlotAdTypePaster = 6, // paster ads BUAdSlotAdTypeRewardVideo = 7, // 激励视频广告 BUAdSlotAdTypeFullscreenVideo = 8, // 全屏视频广告 BUAdSlotAdTypeDrawVideo = 9, // 垂直(沉浸式)视频广告\n\n\n\n\nposition\n\n\t\n\n广告位置\n\n\t\n\nBUAdSlotPosition\n\n\t\n\n必传参数；BUAdSlotPositionTop = 1, BUAdSlotPositionBottom = 2, BUAdSlotPositionFeed = 3, BUAdSlotPositionMiddle = 4, // 只供插屏广告使用 BUAdSlotPositionFullscreen = 5,\n\n\n\n\nimgSizeArray\n\n\t\n\n一组图片尺寸\n\n\t\n\nNSMutableArray<BUSize *> \n\n\t\n\n// 单位px；可选参数@property (nonatomic, assign) NSInteger width;@property (nonatomic, assign) NSInteger height;\n\n\n\n\nimgSize\n\n\t\n\n图片尺寸\n\n\t\n\nBUSize\n\n\t\n\n// 单位px；必传参数@property (nonatomic, assign) NSInteger width;@property (nonatomic, assign) NSInteger height;\n\n\n\n\niconSize\n\n\t\n\nlogo尺寸\n\n\t\n\nBUSize\n\n\t\n\n// 单位px；可选参数@property (nonatomic, assign) NSInteger width;@property (nonatomic, assign) NSInteger height;\n\n\n\n\ntitleLengthLimit\n\n\t\n\n标题最大长度限制\n\n\t\n\nNSInteger\n\n\t\n\n可选参数；广告标题最大长度限制\n\n\n\n\ndescLengthLimit\n\n\t\n\n描述最大长度限制\n\n\t\n\nNSInteger\n\n\t\n\n可选参数；广告描述最大长度限制\n\n\n\n\ndictionaryValue\n\n\t\n\n/\n\n\t\n\nNSDictionary\n\n\t\n\n/\n\n广告数据类(BUMaterialMeta)\n\n广告数据的载体类 BUMaterialMeta ，访问可以获取所有的广告属性。\n\nBUMaterialMeta接口说明\n\n字段定义\n\n\t\n\n字段名称\n\n\t\n\n字段类型\n\n\t\n\n备注\n\n\n\n\ninteractionType\n\n\t\n\n广告交互类型\n\n\t\n\nBUInteractionType\n\n\t\n\nBUInteractionTypeCustorm = 0,BUInteractionTypeNO_INTERACTION = 1, // 纯广告展示BUInteractionTypeURL = 2, // 使用浏览器打开网页BUInteractionTypePage = 3, // 在app内打开网页BUInteractionTypeDownload = 4, // 下载appBUInteractionTypePhone = 5, // 打电话BUInteractionTypeMessage = 6, // 发信息BUInteractionTypeEmail = 7, // 发邮件BUInteractionTypeVideoAdDetail = 8 // 视频广告详情页\n\n\n\n\nimageAry\n\n\t\n\n物料图片\n\n\t\n\nNSArray<BUImage *> \n\n\t\n\n物料图片\n\n\n\n\nicon\n\n\t\n\nlogo标识\n\n\t\n\nBUImage\n\n\t\n\nlogo标识\n\n\n\n\nAdTitle\n\n\t\n\n广告标题\n\n\t\n\nNSString\n\n\t\n\n广告标题\n\n\n\n\nAdDescription\n\n\t\n\n广告描述\n\n\t\n\nNSString\n\n\t\n\n广告描述\n\n\n\n\nsource\n\n\t\n\n广告源\n\n\t\n\nNSString\n\n\t\n\n广告源\n\n\n\n\nbuttonText\n\n\t\n\n文本按钮\n\n\t\n\nNSString\n\n\t\n\n文本按钮\n\n\n\n\nimageMode\n\n\t\n\n信息流广告模式\n\n\t\n\nBUFeedADMode\n\n\t\n\n仅使用于信息流广告，其他广告忽略此属性BUFeedADModeSmallImage = 2, //小图BUFeedADModeLargeImage = 3, //大图BUFeedADModeGroupImage = 4, //组图BUFeedVideoAdModeImage = 5, // 视频广告\n\n\n\n\nscore\n\n\t\n\n星级评级\n\n\t\n\nNSInteger\n\n\t\n\n评级标准1～5\n\n\n\n\ncommentNum\n\n\t\n\n评论数\n\n\t\n\nNSInteger\n\n\t\n\n评论数\n\n\n\n\nappSize\n\n\t\n\n广告安装包大小\n\n\t\n\nNSInteger\n\n\t\n\n广告安装包大小，单位字节\n\n\n\n\nvideoDuration\n\n\t\n\n视频时长\n\n\t\n\nNSInteger\n\n\t\n\n视频时长\n\n\n\n\nmediaExt\n\n\t\n\n透传参数\n\n\t\n\nNSDictionary\n\n\t\n\n透传参数\n\n相关视图类(BUNativeAdRelatedView)\n\n相关视图类可以添加logo、广告标签、视频视图、不喜欢按钮等。\n\nBUNativeAdRelatedView接口说明\n\n字段定义\n\n\t\n\n字段名称\n\n\t\n\n字段类型\n\n\t\n\n备注\n\n\n\n\ndislikeButton\n\n\t\n\ndislike按钮\n\n\t\n\nUIButton\n\n\t\n\n需主动添加视图，接受用户反馈，提高广告的准确性。\n\n\n\n\nadLabel\n\n\t\n\n广告Label\n\n\t\n\nUILabel\n\n\t\n\n广告标签，需主动添加到视图中。\n\n\n\n\nlogoImageView\n\n\t\n\n广告logo\n\n\t\n\nUIImageView\n\n\t\n\n广告logo，需主动添加到视图中。\n\n\n\n\nlogoADImageView\n\n\t\n\n广告logo+广告标识语\n\n\t\n\nUIImageView\n\n\t\n\n广告logo+广告标识语，需主动添加到视图中。\n\n\n\n\nvideoAdView\n\n\t\n\n视频View\n\n\t\n\nBUVideoAdView\n\n\t\n\n视频View，需主动添加到视图中。\n\n\n\n\nrefreshData:nativeAd\n\n\t\n\n/\n\n\t\n\n/\n\n\t\n\n刷新数据回调方法；注意：添加logo、广告标签、视频视图、dislike按钮，每次获取物料信息后需要刷新调用-(void)refreshData:(BUNativeAd *)nativeAd 方法刷新对应的视图绑定的数据.\n\n视频视图(BUVideoAdView)\n\nBUVideoAdView 提供了 play、pause、currentPlayTime 等方法，开发者可用于在信息流中实现划入屏幕自动播放，划出屏幕暂停，点击传入已播放时间用于续播等。\n\nBUVideoAdView接口说明\n\n回调方法\n\n\t\n\n注释\n\n\n\n\n- (CGFloat)currentPlayTime;\n\n\t\n\n获取播放进度（当前时间）方法\n\n\n\n\n- (void)play;\n\n\t\n\n播放方法\n\n\n\n\n- (void)pause;\n\n\t\n\n暂停方法\n\n\n\n\n@property (nonatomic, weak, readwrite) UIViewController *rootViewController;\n\n\t\n\n必传参数；设置rootViewController，广告跳转的载体，根视图控制器。\n\n\n\n\n@property (nonatomic, assign) BOOL drawVideoClickEnable;\n\n\t\n\n是否允许点击暂停视频，默认NO。仅用于Draw视频广告（沉浸式广告）\n\n\n\n\n@property (nonatomic, strong, readwrite, nullable) BUMaterialMeta *materialMeta;\n\n\t\n\nBUMaterialMeta广告数据的载体类，用于获取广告的所有属性\n\n\n\n\n@property (nonatomic, assign) BOOL supportAutoPlay;\n\n\t\n\n是否支持自动播放，视频广告的自定义模式，默认支持自动播放\n\n\n\n\nplayerPlayIncon: playInconSize:\n\n\t\n\n自定义暂停按钮样式方法\n\nBUVideoAdViewDelegate回调说明\n\n回调方法\n\n\t\n\n注释\n\n\n\n\nvideoAdView:didLoadFailWithError:videoAdView\n\n\t\n\n播放失败时调用此方法；返回的错误码(error)表示播放失败的原因，所有错误码详情请见链接。Link\n\n\n\n\nvideoAdView: stateDidChanged:\n\n\t\n\n当videoAdView回放状态更改时调用此方法。playerState:更改后的状态\n\n\n\n\nplayerDidPlayFinish:\n\n\t\n\n播放完成时调用此方法\n\n\n\n\nvideoAdViewDidClick:videoAdView\n\n\t\n\n点击回调方法，点击视频区域会触发此回调方法\n\n\n\n\nvideoAdViewFinishViewDidClick:\n\n\t\n\n此方法在单击videoAdView的finish视图时被调用\n\n\n\n\nvideoAdViewDidCloseOtherController: interactionType\n\n\t\n\n:此回调在广告跳转到其他控制器时，该控制器被关闭时调用interactionType：此参数可区分是打开的appstore/网页/视频广告详情页面\n\nBUVideoAdView初始化事例\n\n复制\nself.videoAdView = [[BUVideoAdView alloc] init];\nself.videoAdView.materialMeta = (BUMaterialMeta *)self.material;\nself.videoAdView.rootViewController = self;\n[self addSubview:self.videoAdView];\n不感兴趣类(BUDislike)\n\n通过BUDislike类可以自定义dislike按钮的样式。\n\nBUDislike接口说明\n\n回调方法\n\n\t\n\n注释\n\n\t\n\n其他说明\n\n\n\n\n@property (nonatomic, copy, readonly) NSArray<BUDislikeWords *> *filterWords;\n\n\t\n\nBUDislikeWords数组如果[filterWords.options count] > 0可展示第二页\n\n\t\n\n-\n\n\n\n\ninitWithNativeAd:\n\n\t\n\n使用nativeAd初始化以获得filterWords返回BUDislike\n\n\t\n\n-\n\n\n\n\ndidSelectedFilterWordWithReason:\n\n\t\n\n1）在用户选择不喜欢的原因后调用此方法。(仅适用于使用 BUDislike.filterWords 的对象)2）如果 [filterWords.options count]> 0 。不需要调用这个方法。3）不能更改 BUDislike.filterWords ，filterWord必须是BUDislike中的一个，否则将被过滤。\n\n\t\n\n-\n\n\n\n\nnativeAd: adContainerViewDidRemoved:\n\n\t\n\n信息流广告的强制关闭广告回调，需要媒体在此回调做关闭的相关处理避免页面布局异常\n\n\t\n\n3600版本SDK新增，自渲染信息流/Banner广告使用\n\n注意：使用BUDislike类必须确保用户点击后调用接口 （didSelectedFilterWordWithReason:） 将原因上报\n\n\n\n\n\n\n\n本篇目录\n简介\n广告位类(BUAdSlot)\n广告数据类(BUMaterialMeta)\n相关视图类(BUNativeAdRelatedView)\n视频视图(BUVideoAdView)\n不感兴趣类(BUDislike)\n评价此篇文档\n有帮助\n无帮助"
}