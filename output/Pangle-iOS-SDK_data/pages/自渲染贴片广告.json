{
  "url": "https://www.csjplatform.com/supportcenter/5389",
  "title": "自渲染贴片广告",
  "content": "开发测试/iOS集成文档/自渲染贴片广告\n自渲染贴片广告\n最近更新 2025-10-14 14:12:21\n简介\n\n贴片广告： 贴片广告是一种视频广告形式，开发者可以将广告位设置在其APP内的视频播放前/播放中/播放结束后。贴片广告的时长可以设置成固定时长，如5s/15s等；也可以不限制固定时长，在5-60s范围内由系统返回收益最高的广告，帮助开发者实现收益最大化。贴片广告目前仅支持自渲染，可以使用穿山甲默认播放器，也可以申请使用开发者自己的播放器。\n\n支持的广告尺寸：横版视频 （宽高比：1.78）\n\n权限\n\n自渲染贴片广告：默认需要申请权限\n\nSDK版本要求: 3400及以上\n\n使用说明\n\n自渲贴片广告使用BUNativeAdsManager对象调用loadAdDataWithCount: 请求广告，通过设置BUNativeAdsManagerDelegate、BUVideoAdViewDelegate、BUNativeAdDelegate代理，获取广告相关素材、以及点击等回调。\n\n创建广告位对象、请求广告\n\nBUNativeAdsManager\n\n请求广告时需要传入广告位对象，广告位对象创建时必须传入广告位ID及广告基本配置BUAdSlot\n\n字段定义\n\n\t\n\n是否必传\n\n\t\n\n字段名称\n\n\t\n\n字段类型\n\n\t\n\n备注\n\n\n\n\nBUAdSlot\n\n\t\n\n是\n\n\t\n\n/\n\n\t\n\n/\n\n\t\n\n基本配置\n\n\n\n\nslotID\n\n\t\n\n是\n\n\t\n\n代码位\n\n\t\n\nNSString\n\n\t\n\n代码位ID\n\n使用BUAdSlot创建广告基本信息，使用BUNativeAdsManager调用loadAdDataWithCount: 请求广告\n\n复制\n//保证每次请求的广告对象为新的广告对象，避免重复使用广告同一个对象进行广告请求\nBUNativeAdsManager *nad = [BUNativeAdsManager new];\nBUAdSlot *slot = [[BUAdSlot alloc] init];\nslot.ID = self.viewModel.slotID;\nslot.AdType = BUAdSlotAdTypePaster;\nslot.position = BUAdSlotPositionTop;\nslot.imgSize = [BUSize sizeBy:BUProposalSize_Feed690_388];\nnad.adslot = slot;\nnad.delegate = self;\n[nad loadAdDataWithCount:3];\n\n注意：loadAdDataWithCount请求数建议一次请求不超过3个\n\n接收广告加载结果\n\n回调方法\n\n\t\n\n注释\n\n\n\n\nnativeAdsManagerSuccessToLoad: nativeAds:\n\n\t\n\n加载成功回调；在此回调中进行相关的数据插入处理\n\n\n\n\nnativeAdsManager:didFailWithError:\n\n\t\n\n返回的错误码(error)表示广告加载失败的原因，所有错误码详情请见链接。Link\n\nBUNativeAdDelegate回调说明\n\n回调方法\n\n\t\n\n注释\n\n\n\n\nnativeAdDidLoad:\n\n\t\n\n广告物料加载成功\n\n\n\n\nnativeAd:didFailWithError:\n\n\t\n\n返回的错误码(error)表示广告加载失败的原因，所有错误码详情请见链接。Link\n\n\n\n\nnativeAdDidBecomeVisible:\n\n\t\n\n广告显示回调\n\n\n\n\nnativeAdDidCloseOtherController: interactionType:\n\n\t\n\n此回调在广告跳转到其他控制器时，该控制器被关闭时调用interactionType：此参数可区分是打开的appstore/网页/视频广告详情页面\n\n\n\n\nnativeAdDidClick:withView:\n\n\t\n\n除视频区域外，点击会响应此回调方法\n\n\n\n\nnativeAd:dislikeWithReason:\n\n\t\n\ndislike按钮点击回调，需要在此回调方法中进行响应的数据处理\n\nSDK播放器接入\n\n媒体使用SDK播放器，需要使用BUNativeAdRelatedView中的videoAdView添加到自渲染的广告视图中，此时视频播放以及埋点有SDK控制。\n\n复制\nBUNativeAdRelatedView *nativeAdRelatedView = [[BUNativeAdRelatedView alloc] init];\n/// @param nativeAd 广告物料\n[nativeAdRelatedView refreshData:nativeAd];\n[self addSubview:nativeAdRelatedView.videoAdView];\n\n详细接入可参照Demo中的BUDPasterContentView类，BUNativeAdRelatedView内容需要使用refreshData:来刷新\n\n贴片广告的切换\n\n多个贴片广告媒体可以根据需求进行切换或是顺序调整，每个贴片广告的时长可以通过BUMaterialMeta的属性videoDuration获取。\n\n贴片广告点击事件\n\n媒体自渲染的贴片广告需要使用registerContainer:withClickableViews:clickableViews注册绑定点击的View\n\n复制\nBUNativeAd *ad = self.currentAds[self.currentAdIndex];\nBUDPasterContentView *currentAdView = self.adViews[self.currentAdIndex];\n...\n// 注册点击事件\n[ad registerContainer:currentAdView withClickableViews:@[currentAdView.creativeBtn]];\nad.rootViewController = self;\n// 刷新UI\n[currentAdView refreshUIWithModel:ad];\n\n点击事件回调\n\n回调方法\n\n\t\n\n注释\n\n\t\n\n备注\n\n\n\n\n- (void)videoAdViewDidClick:\n\n\t\n\nSDK播放器点击事件\n\n\t\n\n仅适用SDK播放器\n\n\n\n\n- (void)videoAdViewDidCloseOtherController:\n\n\t\n\n此回调在广告跳转到其他控制器时，该控制器被关闭时调用interactionType：此参数可区分是打开的appstore/网页/视频广告详情页面。用于SDK播放器点击关闭控制器的回调。\n\n\t\n\n仅适用于SDK播放器\n\n\n\n\n- (void)nativeAdDidClick:withView:\n\n\t\n\n整个广告区域点击事件，使用SDK播放器的话，表示非视频区域点击事件\n\n\t\n\n\n\n\n\n\n\n- (void)nativeAdDidCloseOtherController:interactionType:\n\n\t\n\n此回调在广告跳转到其他控制器时，该控制器被关闭时调用interactionType：此参数可区分是打开的appstore/网页/视频广告详情页面\n\n\t\n\n\n\n\n\n\n\n- (void)nativeAd:dislikeWithReason:\n\n\t\n\n使用BUNativeAdRelatedView中提供的关闭按钮，在点击关闭按钮的回调\n\n\t\n\n\n\n\n详细可参照Demo中的BUDPasterBaseViewController类。\n\n注意事项\n\n1、在物料加载成功方法里获取相关广告信息赋值后，需调用 registerContainer:withClickableViews:clickableViews注册绑定点击的View并刷新数据源refreshData:。\n\n2、每次获取物料信息后需要刷新调用refreshData:方法。\n\n\n\n\n\n\n\n本篇目录\n简介\n权限\n使用说明\n创建广告位对象、请求广告\n接收广告加载结果\nSDK播放器接入\n贴片广告的切换\n贴片广告点击事件\n注意事项\n评价此篇文档\n有帮助\n无帮助"
}