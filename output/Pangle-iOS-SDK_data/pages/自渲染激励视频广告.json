{
  "url": "https://www.csjplatform.com/supportcenter/27687",
  "title": "自渲染激励视频广告",
  "content": "开发测试/iOS集成文档/历史功能/自渲染激励视频广告\n自渲染激励视频广告\n最近更新 2025-12-29 20:04:48\n简介\n\n激励视频是一种全屏播放的视频广告，用户可以在观看完整的视频后获取奖励,视频广告播放结束后会显示结束页面，引导用户进行后续动作。\n\n支持的广告尺寸： 全屏横屏(宽高比16:9)、全屏竖屏(宽高比9:16)\n\n权限\n\nSDK渲染激励视频： 白名单\n\n激励视频进阶奖励：SDK版本 >=4400\n\n配置说明\n\n①开发者根据展示场景勾选视频播放方向：横版or竖版，展示过程中不可旋转\n\n②奖励名称和奖励数量依据自身项目需求设置即可，例如：奖励名称为金币，奖励数量：1000\n\n奖励发放设置：\n当选择无需服务器判断时，开发者可以根据客户端nativeExpressRewardedVideoAdServerRewardDidSucceed回调进行奖励的发放。\n当选择需要服务器判断时，开发者需要按照以下要求进行接口开发，并在平台上填写回调URL。服务器回调是指在用户在看完激励视频达到奖励条件时，穿山甲服务端会向开发者服务端发送一个验证申请，开发者服务端收到请求后判断是否给用户奖励，返回给穿山甲服务器true/false，最终客户端会给出nativeExpressRewardedVideoAdServerRewardDidSucceed回调，开发者根据回调进行奖励发放，或者通过服务端接口验证结果进行奖励发放。\n奖励发放机制分为客户端回调与服务端回调，具体可参考文档： 激励视频交互方式简介&奖励方法说明\n基础功能说明\n\nSDK渲染激励视频使用BURewardedVideoAd对象调用loadAdData方法请求广告，使用BURewardedVideoAd对象调用showAdFromRootViewController:展示广告，通过设置BURewardedVideoAdDelegate代理，获取广告、展示、点击、关闭等回调。\n\n创建广告位对象、请求广告\n\nBURewardedVideoAd\n\n请求广告时需要传入广告位对象，广告位对象创建时必须传入广告位ID\n\n每次需要生成新的BURewardedVideoAd对象调用loadAdData方法请求最新激励视频，请勿重复使用本地缓存激励视频多次展示\n\n字段定义\n\n\t\n\n是否必传\n\n\t\n\n字段名称\n\n\t\n\n字段类型\n\n\t\n\n备注\n\n\n\n\nSlotID\n\n\t\n\n是\n\n\t\n\n广告位\n\n\t\n\nNSString\n\n\t\n\n代码位ID\n\n\n\n\nuserId\n\n\t\n\n是\n\n\t\n\ntag_id\n\n\t\n\nNSString\n\n\t\n\ntag_id\n\n\n\n\nextra\n\n\t\n\n否\n\n\t\n\n透传参数\n\n\t\n\nNSString\n\n\t\n\n应为json序列化后的字符串，仅支持单个json对象格式，不可以嵌套json对象\n\n使用BURewardedVideoAd创建对象，使用BURewardedVideoAd调用loadAdData请求广告\n\n复制\n//保证每次请求的广告对象为新的广告对象，避免重复使用广告同一个对象进行广告请求\nBURewardedVideoModel *model = [[BURewardedVideoModel alloc] init];\nmodel.userId = @\"tag123\";\nself.rewardedVideoAd = [[BURewardedVideoAd alloc] initWithSlotID:slotID rewardedVideoModel:model];\nself.rewardedVideoAd.delegate = self;\n// optional\n    self.rewardedVideoAd.rewardPlayAgainInteractionDelegate = self.rewardedVideoAgainDelegateObj;\n[self.rewardedVideoAd loadAdData];\n展示广告\n\n激励视频广告需要让用户主动选择去观看，给用户选择，不能强制用户观看激励视频广告。广告播放完成需要给用户发放相应的奖励。\n\n调用showAdFromRootViewController: 方法展示激励视频广告，此处需要传入当前展示的页面。一定要设置rootViewController，即展示广告和跳转落地页需要的viewController\n\n复制\n- (void)showRewardVideoAd {\n  if (self.rewardedVideoAd) {\n     [self.rewardedVideoAd showAdFromRootViewController:self];\n   }\n }\n展示时机\n\n在收到rewardedVideoAdVideoDidLoad回调后再允许用户观看广告，可保证播放流畅和展示流畅，用户体验更好。\n\n复制\n- (void)rewardedVideoAdVideoDidLoad:(BURewardedVideoAd *)rewardedVideoAd {\n   //此回调方法后进行广告的展示，可保证播放流畅和展示流畅，用户体验更好。\n}\n广告展示后重新加载广告\n\n同一次请求的广告最多只能计一次展示，重复的展示会被系统过滤。因此建议开发者在用户观看完广告后在rewardedVideoAdDidClose回调里将原来的广告对象置为nil 保证广告对象为新的请求对象\n\n复制\n- (void)rewardedVideoAdDidClose:(BURewardedVideoAd *)rewardedVideoAd {\n//可在此回调中将广告对象置为nil\n}\n奖励发放机制\n\n奖励发放机制分为客户端回调与服务端回调，具体可参考文档： 激励视频交互方式简介&奖励方法说明\n\n接收广告加载结果\n\n回调方法\n\n\t\n\n注释\n\n\n\n\nrewardedVideoAd:didFailWithError:\n\n\t\n\n返回的错误码(error)表示广告加载失败的原因，所有错误码详情请见链接。Link\n\n\n\n\nrewardedVideoAdDidLoad:\n\n\t\n\n广告素材物料加载成功\n\n\n\n\nrewardedVideoAdVideoDidLoad:\n\n\t\n\n视频下载完成\n\nBURewardedVideoAdDelegate回调说明\n\n回调方法\n\n\t\n\n注释\n\n\n\n\nrewardedVideoAdDidLoad:\n\n\t\n\n物料加载成功回调\n\n\n\n\nrewardedVideoAd: didFailWithError:\n\n\t\n\n加载失败回调\n\n\n\n\nrewardedVideoAdVideoDidLoad:\n\n\t\n\n视频下载成功回调，建议在此回调方法中进行广告的展示，可保证广告播放流畅展示，用户体验较好。\n\n\n\n\nrewardedVideoAdWillVisible:\n\n\t\n\n当广告即将显示时，会进入此回调方法\n\n\n\n\nrewardedVideoAdDidVisible:\n\n\t\n\n当广告已经显示时，会进入此回调方法\n\n\n\n\nrewardedVideoAdWillClose:\n\n\t\n\n当广告即将被关闭时，会进入此回调方法\n\n\n\n\nrewardedVideoAdDidClose:\n\n\t\n\n关闭回调，当广告关闭时可才此回调中进行相关的逻辑\n\n\n\n\nrewardedVideoAdDidClick:\n\n\t\n\n当广告被点击时，会进入此回调方法\n\n\n\n\nrewardedVideoAdDidPlayFinish:didFailWithError:\n\n\t\n\n当广告播放完成或者发生错误时会进入此回调，打印error即可。所有错误码详情请见链接。Link\n\n\n\n\nrewardedVideoAdServerRewardDidSucceed: verify:\n\n\t\n\n异步请求的服务器验证成功回调\n\n\n\n\nrewardedVideoAdServerRewardDidFail:\n\n\t\n\n异步请求的服务器验证失败回调\n\n\n\n\nrewardedVideoAdServerRewardDidFail: error:\n\n\t\n\n异步请求的服务器验证失败回调，此回调方法中可打印失败原因，即打印error即可。所有错误码详情请见链接。Link\n\n\n\n\nrewardedVideoAdDidClickSkip:\n\n\t\n\n点击跳过回调（此功能需单独申请，cpm负向影响）\n\n\n\n\nrewardedVideoAdCallback: withType:\n\n\t\n\n此回调可知激励视频的广告类型\n\n通过设置BURewardedVideoAdDelegate代理，获取广告的点击、关闭、播放完成等回调。其他代理方法可参见BUDRewardedVideoAdViewController类#pragma mark - BURewardedVideoAdDelegate\n\n高级功能说明\n进阶奖励功能\n复制\n// 区分此次奖励的类型，默认为BURewardType_Default\n​\n@property (nonatomic, assign) BURewardType rewardType;\n​\ntypedef NS_ENUM(NSInteger, BURewardType) {    \n​\nBURewardType_Default            = 0,       // 基础奖励 (满足观看时长、互动抵时长、playable试完等)    \n​\nBURewardType_Interact           = 1,       // 进阶奖励-互动    \n​\nBURewardType_VideoComplete      = 2,       // 进阶奖励-超过30s的视频播放完成\n​\n};\n​\nnumber of rewards of propose, 0.0 ~ 1.0 (BURewardType_Default: 1). // 建议奖励数量，进阶奖励功能可选\n​\n@property (nonatomic, assign) float rewardPropose;//若rewardedVideoAd.rewardedVideoModel.rewardType不为BURewardType_Default时(暂支持BURewardType_Interact、BURewardType_VideoComplete)，即可发奖励，奖励数量可以参考rewardPropose给出的建议。\n注意事项\n\n①必须要设置rootViewController，用来处理广告跳转。SDK里所有的跳转均采用present的方式，请确保传入的rootViewController不能为空且没有present其他的控制器，否则会出现presentedViewController已经存在而导致present失败。\n\n②如选择服务器回调方式，请确保userId为NSString类型且不为空，并保证回调URL格式为\n\n复制\n{\n    \"isValid\": true\n}\n\n③为保证播放流畅和展示流畅，用户体验更好，在收到rewardedVideoAdVideoDidLoad回调后进行广告的展示\n\n④extra透传参数应为json序列化后的字符串，确保不为空\n\n⑤判断广告是否有效直接使用self.rewardedAd判断即可。目前isAdValid字段已废弃，请不要使用此字段判断广告是否有效\n\n⑥广告的关闭操作必须用户主动触发，客户端不能进行代码层面的强制关闭操作\n\n资源\n\n详细接入可参照Demo中的BUDRewardedVideoAdViewController类，广告加载请求部分可参照loadRewardVideoAdWithSlotID:方法，广告展示部分可参照showRewardVideoAd方法\n\n\n\n\n本篇目录\n简介\n权限\n配置说明\n基础功能说明\n创建广告位对象、请求广告\n展示广告\n展示时机\n广告展示后重新加载广告\n奖励发放机制\n接收广告加载结果\n高级功能说明\n进阶奖励功能\n注意事项\n资源\n评价此篇文档\n有帮助\n无帮助"
}
