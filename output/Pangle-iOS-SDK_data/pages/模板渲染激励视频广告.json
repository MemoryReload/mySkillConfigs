{
  "url": "https://www.csjplatform.com/supportcenter/5381",
  "title": "模板渲染激励视频广告",
  "content": "开发测试/iOS集成文档/模板渲染激励视频广告\n模板渲染激励视频广告\n最近更新 2025-12-29 18:34:49\n简介\n\n激励视频是一种全屏播放的视频广告，用户可以在观看完整的视频后获取奖励,视频广告播放结束后会显示结束页面，引导用户进行后续动作。\n\n支持的广告尺寸： 全屏横屏(宽高比16:9)、全屏竖屏(宽高比9:16)\n\n配置说明\n\n①开发者根据展示场景勾选视频播放方向：横版or竖版，展示过程中不可旋转\n\n②奖励名称和奖励数量依据自身项目需求设置即可，例如：奖励名称为金币，奖励数量：1000。V< 5.2.0.4，奖励发放实际情况按照平台配置参数进行下发，客户端接口不生效。iOS/Android SDK版本>=5.2.0.4，支持在激励视频广告中显示奖励内容，通过客户端接口设置rewardName和rewardAmount字段，详见下方“在激励广告中显示奖励内容”模块说明。\n\n奖励发放设置：\n当选择无需服务器判断时，开发者可以根据客户端nativeExpressRewardedVideoAdServerRewardDidSucceed回调进行奖励的发放。\n当选择需要服务器判断时，开发者需要按照以下要求进行接口开发，并在平台上填写回调URL。服务器回调是指在用户在看完激励视频达到奖励条件时，穿山甲服务端会向开发者服务端发送一个验证申请，开发者服务端收到请求后判断是否给用户奖励，返回给穿山甲服务器true/false，最终客户端会给出nativeExpressRewardedVideoAdServerRewardDidSucceed回调，开发者根据回调进行奖励发放，或者通过服务端接口验证结果进行奖励发放。\n奖励发放机制分为客户端回调与服务端回调，具体可参考文档： 激励视频交互方式简介&奖励方法说明\n基础功能说明\n\n模版激励视频使用BUNativeExpressRewardedVideoAd对象调用loadAdData方法请求广告，使用BUNativeExpressRewardedVideoAd对象调用showAdFromRootViewController:展示广告，通过设置BUNativeExpressRewardedVideoAdDelegate代理，获取广告、展示、点击、关闭等回调。\n\n创建广告位对象、请求广告\n\n请求广告时需要传入广告位对象，广告位对象创建时必须传入广告位ID\n\n字段定义\n\n\t\n\n是否必传\n\n\t\n\n字段名称\n\n\t\n\n字段类型\n\n\t\n\n备注\n\n\n\n\nslotID\n\n\t\n\n是\n\n\t\n\n代码位ID\n\n\t\n\nNSString\n\n\t\n\n应为json序列化后的字符串\n\n\n\n\nmodel\n\n\t\n\n是\n\n\t\n\n/\n\n\t\n\nBURewardedVideoModel\n\n\t\nrewardName：奖励名称 \n是否必传：否\n显示奖励内容时使用\nrewardAmount：奖励数量\n是否必传：否\n显示奖励内容时使用\nextra\n是否必传：否\n透传参数\n\n\n\n\n\n使用BUNativeExpressRewardedVideoAd创建对象，使用BUNativeExpressRewardedVideoAd调用loadAdDat请求广告\n\n复制\n    //保证每次请求的广告对象为新的广告对象，避免重复使用广告同一个对象进行广告请求    \n    BURewardedVideoModel *model = [[BURewardedVideoModel alloc] init];\n\n    model.rewardName = @\"金币\";\n\n    model.rewardAmount = 300;\n\n    self.rewardedAd = [[BUNativeExpressRewardedVideoAd alloc] initWithSlotID:slotID rewardedVideoModel:model];\n\n    // 不支持中途更改代理，中途更改代理会导致接收不到广告相关回调，如若存在中途更改代理场景，需自行处理相关逻辑，确保广告相关回调正常执行。\n    self.rewardedAd.delegate = self;\n\n    // optional\n    self.rewardedAd.rewardPlayAgainInteractionDelegate = self.expressRewardedVideoAgainDelegateObj;\n\n   [self.rewardedAd loadAdData];\n展示广告\n\n激励视频广告需要让用户主动选择去观看，给用户选择，不能强制用户观看激励视频广告。广告播放完成需要给用户发放相应的奖励。调用showAdFromRootViewController:方法展示激励视频广告，此处需要传入当前展示的页面。一定要设置rootViewController，即展示广告和跳转落地页需要的viewController\n\n复制\n//show的时候会进行WKWebview的渲染，建议一次最多展示三个广告，如果超过3个会很大概率导致WKWebview渲染失败。当然一般情况下激励视频一次只会show一个\n- (void)showRewardVideoAd {\n    if (self.rewardedAd) {\n       [self.rewardedAd showAdFromRootViewController:self];\n   }\n}\n展示时机\n\n在收到nativeExpressRewardedVideoAdDidDownLoadVideo回调后再允许用户观看广告，可保证播放流畅和展示流畅，用户体验更好。\n\n复制\n- (void)nativeExpressRewardedVideoAdDidDownLoadVideo:(BUNativeExpressRewardedVideoAd *)rewardedVideoAd {\n //在此回调方法后进行广告的展示，可保证播放流畅和展示流畅，用户体验更好。\n}\n广告展示后重新加载广告\n\n同一次请求的广告最多只能计一次展示，重复的展示会被系统过滤。因此建议开发者在用户观看完广告后在nativeExpressRewardedVideoAdDidClose回调里将原来的广告对象置为nil 保证广告对象为新的请求对象\n\n复制\n- (void)nativeExpressRewardedVideoAdDidClose:(BUNativeExpressRewardedVideoAd *)rewardedVideoAd {\n//在此回调方法中可进行广告的置空操作\n}\n奖励发放机制\n\n奖励发放机制分为客户端回调与服务端回调，具体可参考文档： 激励视频交互方式简介&奖励方法说明\n\n接收广告加载结果\n\nBUNativeExpressRewardedVideoAdDelegate回调说明\n\n回调方法\n\n\t\n\n注释\n\n\n\n\nnativeExpressRewardedVideoAd:didFailWithError\n\n\t\n\n返回的错误码(error)表示广告加载失败的原因，所有错误码详情请见链接。Link\n\n\n\n\nnativeExpressRewardedVideoAdViewRenderFail:error\n\n\t\n\n渲染失败，网络原因或者硬件原因导致渲染失败,可以更换手机或者网络环境测试。建议升级到穿山甲平台最新版本\n\n\n\n\nnativeExpressRewardedVideoAdDidLoad\n\n\t\n\n广告素材物料加载成功\n\n\n\n\nnativeExpressRewardedVideoAdDidDownLoadVideo\n\n\t\n\n视频下载完成\n\nBUNativeExpressRewardedVideoAdDelegate回调说明\n\n回调方法\n\n\t\n\n注释\n\n\n\n\nnativeExpressRewardedVideoAdDidLoad:\n\n\t\n\n回调进入证明广告物料已成功加载\n\n\n\n\nnativeExpressRewardedVideoAd: didFailWithError:\n\n\t\n\n此回调方法中可定位具体的失败原因对应的错误码，打印error即可。所有错误码详情请见链接。Link\n\n\n\n\nnativeExpressRewardedVideoAdCallback:withType:\n\n\t\n\n此回调可知模版激励视频的广告类型\n\n\n\n\nnativeExpressRewardedVideoAdDidDownLoadVideo\n\n\t\n\n建议在此回调方法中进行广告的展示操作，可保证播放流畅和展示流畅，用户体验更好。\n\n\n\n\nnativeExpressRewardedVideoAdViewRenderSuccess:\n\n\t\n\n渲染成功回调。3100之后版本SDK，广告展示之后才会回调\n\n\n\n\nnativeExpressRewardedVideoAdViewRenderFail:\n\n\t\n\n渲染失败，网络原因或者硬件原因导致渲染失败,可以更换手机或者网络环境测试。建议升级到穿山甲平台最新版本\n\n\n\n\nnativeExpressRewardedVideoAdWillVisible:\n\n\t\n\n模版激励视频广告即将展示\n\n\n\n\nnativeExpressRewardedVideoAdDidVisible:\n\n\t\n\n模版激励视频广告已经展示\n\n\n\n\nnativeExpressRewardedVideoAdWillClose:\n\n\t\n\n模版激励视频广告即将关闭\n\n\n\n\nnativeExpressRewardedVideoAdDidClose:\n\n\t\n\n用户关闭广告时会触发此回调，注意：任何广告的关闭操作必须用户主动触发;\n\n\n\n\nnativeExpressRewardedVideoAdDidClick:\n\n\t\n\n点击回调方法\n\n\n\n\nnativeExpressRewardedVideoAdDidClickSkip:\n\n\t\n\n跳过回调方法\n\n\n\n\nnativeExpressRewardedVideoAdDidPlayFinish:\n\n\t\n\n视频正常播放完成时可触发此回调方法，当广告播放发生异常时，不会进入此回调;\n\n\n\n\nnativeExpressRewardedVideoAdServerRewardDidSucceed:\n\n\t\n\n异步请求的服务器验证成功回调，开发者需要在此回调中进行奖励发放。现在包括两个验证方法:1. C2C不需要服务器验证2。S2S需要服务器验证。nativeExpressRewardedVideoAdServerRewardDidFail:异步请求的服务器验证失败回调。可在此回调方法中打印error，定位具体失败的原因，或通过抓包定位具体原因，抓包地址：https://域名或者ip地址/api/ad/union/sdk/get_ads/ 提供返回的数据进行确认）到【留言反馈】-【技术类提问入口（技术类暂仅支持此入口的提问回复）】进行反馈，相关同学会为您处理\n\n\n\n\nnativeExpressRewardedVideoAdDidCloseOtherController:interactionType:此回调在广告跳转到其他控制器时，该控制器被关闭时调用interactionType：\n\n\t\n\n此参数可区分是打开的appstore/网页/视频广告详情页面\n\nnativeExpressRewardedVideoAdServerRewardDidSucceed 回调说明\n\n①不使用户服务端奖励验证的情况下nativeExpressRewardedVideoAdServerRewardDidSucceed回调只校验视频播放状态或者进度，视频播放90%或者因播放器异常导致出现播放失败，那么穿山甲都会回调nativeExpressRewardedVideoAdServerRewardDidSucceed，并且返回结果为true。\n\n②使用服务端奖励验证的情况下nativeExpressRewardedVideoAdServerRewardDidSucceed回调返回的则是开发者服务端验证的结果。\n\n综上： nativeExpressRewardedVideoAdServerRewardDidSucceed 回调只是视频播放状态的一个结果或者是开发者返回的结果，不代表此次播放是否计费等广告业务指标。\n\n高级功能说明\n进阶奖励功能\n接入说明\n\n①适用范围：此功能双端SDK均需在4600及以上。\n\n②权限等级：功能为白名单制。对开发者appid或者指定的rit进行加白。\n\n③视频时长限制：进阶奖励仅针对视频素材时长>35s生效。\n\n接口说明\n复制\n// 区分此次奖励的类型，默认为BURewardType_Default\n\n@property (nonatomic, assign) BURewardType rewardType;\n\ntypedef NS_ENUM(NSInteger, BURewardType) {    \n\nBURewardType_Default            = 0,       // 基础奖励 (满足观看时长、互动抵时长、playable试完等)    \n\nBURewardType_Interact           = 1,       // 进阶奖励-互动    \n\nBURewardType_VideoComplete      = 2,       // 进阶奖励-超过30s的视频播放完成\n\n};\n\nnumber of rewards of propose, 0.0 ~ 1.0 (BURewardType_Default: 1). // 建议奖励数量，进阶奖励功能可选\n\n@property (nonatomic, assign) float rewardPropose;//若rewardedVideoAd.rewardedVideoModel.rewardType不为BURewardType_Default时(暂支持BURewardType_Interact、BURewardType_VideoComplete)，即可发奖励，奖励数量可以参考rewardPropose给出的建议。\n在激励广告中显示奖励内容\n穿山甲激励广告增加「在广告中显示奖励内容」功能，根据开发者配置的奖励物品和数量，在激励视频广告播放过程中提示用户完成激励任务后将获取的奖励收益，以激发用户兴趣、观看更久更完整的视频广告，提升整体的CTR和收入。\n使用说明\n\n①版本要求：iOS/Android SDK版本>=5.2.0.4；\n\n②权限等级：功能面向所有账户开放；\n\n③若想使用此功能，必须在穿山甲平台-激励视频代码位创编中配置开启“是否在广告中显示奖励内容”开关。\n\n\n\n\n④开启后，根据系统优选的结果，您设置的奖励物品名称、奖励数量将有可能在广告播放过程中展示。开发者可以通过两种方案配置具体显示的奖励内容。\n\n在截图所示穿山甲平台的代码位创编页面中里输入奖励名称和数量。\n在请求广告时传入奖励名称和数量，详见文档「接口改动」部分。\n在实际使用时，会按照优先级 2 > 1 来展示，若奖励名称和数量任一为空，则认为此对值无效。\n奖励数量为1~5个数字整数值，奖励内容为1～10个英文字符长度的字符串。\n\n⑤具体的使用示例与温馨提示\n\n奖励物品名称“金币”，奖励数量“500”，广告挽留弹窗提示用户继续看完视频可领取“500金币”；奖励物品名称“分钟免广告”，奖励数量“60”，挽留弹窗显示继续观看xxs可领取奖励“60分钟免广告”。\n建议开发者配置/回传用户可真实获取的奖励内容，避免用户对奖励预期与获取产生出入。\n推荐开发者通过接口回传的形式，以便更灵活、动态地下发奖励，在用户粒度个性化优化收益。\n\n\n\n\n接口说明\n\n在构建BUNativeExpressRewardedVideoAd时，使用BURewardedVideoModel，传入奖励名称与奖励数量。\n\n复制\nBURewardedVideoModel *model = [[BURewardedVideoModel alloc] init];\nmodel.rewardName = @\"金币\";\nmodel.rewardAmount = 300;\nself.rewardedAd = [[BUNativeExpressRewardedVideoAd alloc] initWithSlotID:slotID rewardedVideoModel:model];\n注意事项\n\n①必须要设置rootViewController，用来处理广告跳转。SDK里所有的跳转均采用present的方式，请确保传入的rootViewController不能为空且没有present其他的控制器，否则会出现presentedViewController已经存在而导致present失败。\n\n②如选择服务器回调方式，请确保userId为NSString类型且不为空，并保证回调URL 格式为\n\n复制\n{\n    \"isValid\": true\n}\n\n③nativeExpressRewardedVideoAdViewRenderSuccess渲染成功回调在广告展示后\n\n④为保证播放流畅和展示流畅，用户体验更好，在收到nativeExpressRewardedVideoAdDidDownLoadVideo回调后进行广告的展示\n\n⑤extra透传参数应为json序列化后的字符串，确保不为空\n\n⑥判断广告是否有效直接使用self.rewardedAd判断即可。目前isAdValid字段已废弃，请不要使用此字段判断广告是否有效\n\n⑦个性化模板广告为了优化展示速度,会使用本地模板,请求时会拦截相关数据.如果接入方正在使用H5的页面发送请求,会造成请求body清空,其他逻辑不变.如果使用body传参请更换其他方式.例如:jsBridge方式。\n\n⑧广告的关闭操作，必须用户主动触发，客户端不能进行代码层面的强制关闭操作\n\n资源\n\n详细接入可参照Demo中的BUDExpressRewardedVideoViewController类，广告加载请求部分可参照loadRewardVideoAdWithSlotID方法，广告展示部分可参照showRewardVideoAd方法\n\n\n\n\n\n\n\n\n\n\n本篇目录\n简介\n配置说明\n基础功能说明\n创建广告位对象、请求广告\n展示广告\n展示时机\n广告展示后重新加载广告\n奖励发放机制\n接收广告加载结果\n高级功能说明\n进阶奖励功能\n接入说明\n接口说明\n在激励广告中显示奖励内容\n使用说明\n接口说明\n注意事项\n资源\n评价此篇文档\n有帮助\n无帮助"
}